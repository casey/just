<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Just Programmer&#x27;s Manual</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Just Programmer&#x27;s Manual</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/casey/just" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 align=center><code>just</code></h1>
<div align=center>
  <a href=https://crates.io/crates/just>
    <img src=https://img.shields.io/crates/v/just.svg alt="crates.io version">
  </a>
  <a href=https://github.com/casey/just/actions/workflows/ci.yaml>
    <img src=https://github.com/casey/just/actions/workflows/ci.yaml/badge.svg alt="build status">
  </a>
  <a href=https://github.com/casey/just/releases>
    <img src=https://img.shields.io/github/downloads/casey/just/total.svg alt=downloads>
  </a>
  <a href=https://discord.gg/ezYScXR>
    <img src=https://img.shields.io/discord/695580069837406228?logo=discord alt="chat on discord">
  </a>
  <a href=mailto:casey@rodarmor.com?subject=Thanks%20for%20Just!>
    <img src=https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg alt="say thanks">
  </a>
</div>
<br>
<p><code>just</code> is a handy way to save and run project-specific commands.</p>
<p>This readme is also available as a <a href="https://just.systems/man/en/">book</a>. The
book reflects the latest release, whereas the
<a href="https://github.com/casey/just/blob/master/README.md">readme on GitHub</a>
reflects latest master.</p>
<p>(中文文档在 <a href="https://github.com/casey/just/blob/master/README.%E4%B8%AD%E6%96%87.md">这里</a>,
快看过来!)</p>
<p>Commands, called recipes, are stored in a file called <code>justfile</code> with syntax
inspired by <code>make</code>:</p>
<p><img src="https://raw.githubusercontent.com/casey/just/master/screenshot.png" alt="screenshot" /></p>
<p>You can then run them with <code>just RECIPE</code>:</p>
<pre><code class="language-console">$ just test-all
cc *.c -o main
./test --all
Yay, all your tests passed!
</code></pre>
<p><code>just</code> has a ton of useful features, and many improvements over <code>make</code>:</p>
<ul>
<li>
<p><code>just</code> is a command runner, not a build system, so it avoids much of
<a href="what-are-the-idiosyncrasies-of-make-that-just-avoids.html"><code>make</code>’s complexity and idiosyncrasies</a>.
No need for <code>.PHONY</code> recipes!</p>
</li>
<li>
<p>Linux, MacOS, Windows, and other reasonable unices are supported with no
additional dependencies. (Although if your system doesn’t have an <code>sh</code>,
you’ll need to <a href="settings.html#shell">choose a different shell</a>.)</p>
</li>
<li>
<p>Errors are specific and informative, and syntax errors are reported along
with their source context.</p>
</li>
<li>
<p>Recipes can accept <a href="recipe-parameters.html">command line arguments</a>.</p>
</li>
<li>
<p>Wherever possible, errors are resolved statically. Unknown recipes and
circular dependencies are reported before anything runs.</p>
</li>
<li>
<p><code>just</code> <a href="settings.html#dotenv-settings">loads <code>.env</code> files</a>, making it easy to populate
environment variables.</p>
</li>
<li>
<p>Recipes can be <a href="listing-available-recipes.html">listed from the command line</a>.</p>
</li>
<li>
<p>Command line completion scripts are
<a href="shell-completion-scripts.html">available for most popular shells</a>.</p>
</li>
<li>
<p>Recipes can be written in
<a href="shebang-recipes.html">arbitrary languages</a>, like Python or NodeJS.</p>
</li>
<li>
<p><code>just</code> can be invoked from any subdirectory, not just the directory that
contains the <code>justfile</code>.</p>
</li>
<li>
<p>And <a href="https://just.systems/man/en/">much more</a>!</p>
</li>
</ul>
<p>If you need help with <code>just</code> please feel free to open an issue or ping me on
<a href="https://discord.gg/ezYScXR">Discord</a>. Feature requests and bug reports are
always welcome!</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<p><code>just</code> should run on any system with a reasonable <code>sh</code>, including Linux, MacOS,
and the BSDs.</p>
<p>On Windows, <code>just</code> works with the <code>sh</code> provided by
<a href="https://git-scm.com">Git for Windows</a>,
<a href="https://desktop.github.com">GitHub Desktop</a>, or
<a href="http://www.cygwin.com">Cygwin</a>.</p>
<p>If you’d rather not install <code>sh</code>, you can use the <code>shell</code> setting to use the
shell of your choice.</p>
<p>Like PowerShell:</p>
<pre><code class="language-just"># use PowerShell instead of sh:
set shell := ["powershell.exe", "-c"]

hello:
  Write-Host "Hello, world!"
</code></pre>
<p>…or <code>cmd.exe</code>:</p>
<pre><code class="language-just"># use cmd.exe instead of sh:
set shell := ["cmd.exe", "/c"]

list:
  dir
</code></pre>
<p>You can also set the shell using command-line arguments. For example, to use
PowerShell, launch <code>just</code> with <code>--shell powershell.exe --shell-arg -c</code>.</p>
<p>(PowerShell is installed by default on Windows 7 SP1 and Windows Server 2008 R2
S1 and later, and <code>cmd.exe</code> is quite fiddly, so PowerShell is recommended for
most Windows users.)</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="packages"><a class="header" href="#packages">Packages</a></h3>
<h4 id="cross-platform"><a class="header" href="#cross-platform">Cross-platform</a></h4>
<table>
  <thead>
    <tr>
      <th>Package Manager</th>
      <th>Package</th>
      <th>Command</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href=https://github.com/alexellis/arkade>arkade</a></td>
      <td>just</td>
      <td><code>arkade get just</code></td>
    </tr>
    <tr>
      <td><a href=https://asdf-vm.com>asdf</a></td>
      <td><a href=https://github.com/olofvndrhr/asdf-just>just</a></td>
      <td>
        <code>asdf plugin add just</code><br>
        <code>asdf install just &lt;version&gt;</code>
      </td>
    </tr>
    <tr>
      <td><a href=https://www.rust-lang.org>Cargo</a></td>
      <td><a href=https://crates.io/crates/just>just</a></td>
      <td><code>cargo install just</code></td>
    </tr>
    <tr>
      <td><a href=https://docs.conda.io/projects/conda/en/latest/index.html>Conda</a></td>
      <td><a href=https://anaconda.org/conda-forge/just>just</a></td>
      <td><code>conda install -c conda-forge just</code></td>
    </tr>
    <tr>
      <td><a href=https://brew.sh>Homebrew</a></td>
      <td><a href=https://formulae.brew.sh/formula/just>just</a></td>
      <td><code>brew install just</code></td>
    </tr>
    <tr>
      <td><a href=https://nixos.org/nix/>Nix</a></td>
      <td><a href=https://github.com/NixOS/nixpkgs/blob/master/pkgs/by-name/ju/just/package.nix>just</a></td>
      <td><code>nix-env -iA nixpkgs.just</code></td>
    </tr>
    <tr>
      <td><a href=https://www.npmjs.com/>npm</a></td>
      <td><a href=https://www.npmjs.com/package/rust-just>rust-just</a></td>
      <td><code>npm install -g rust-just</code></td>
    </tr>
    <tr>
      <td><a href=https://pipx.pypa.io/stable/>pipx</a></td>
      <td><a href=https://pypi.org/project/rust-just/>rust-just</a></td>
      <td><code>pipx install rust-just</code></td>
    </tr>
    <tr>
      <td><a href=https://snapcraft.io>Snap</a></td>
      <td><a href=https://snapcraft.io/just>just</a></td>
      <td><code>snap install --edge --classic just</code></td>
    </tr>
  </tbody>
</table>
<h4 id="bsd"><a class="header" href="#bsd">BSD</a></h4>
<table>
  <thead>
    <tr>
      <th>Operating System</th>
      <th>Package Manager</th>
      <th>Package</th>
      <th>Command</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href=https://www.freebsd.org>FreeBSD</a></td>
      <td><a href=https://www.freebsd.org/doc/handbook/pkgng-intro.html>pkg</a></td>
      <td><a href=https://www.freshports.org/deskutils/just/>just</a></td>
      <td><code>pkg install just</code></td>
    </tr>
  </tbody>
</table>
<h4 id="linux"><a class="header" href="#linux">Linux</a></h4>
<table>
  <thead>
    <tr>
      <th>Operating System</th>
      <th>Package Manager</th>
      <th>Package</th>
      <th>Command</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href=https://alpinelinux.org>Alpine</a></td>
      <td><a href=https://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management>apk-tools</a></td>
      <td><a href=https://pkgs.alpinelinux.org/package/edge/community/x86_64/just>just</a></td>
      <td><code>apk add just</code></td>
    </tr>
    <tr>
      <td><a href=https://www.archlinux.org>Arch</a></td>
      <td><a href=https://wiki.archlinux.org/title/Pacman>pacman</a></td>
      <td><a href=https://archlinux.org/packages/extra/x86_64/just/>just</a></td>
      <td><code>pacman -S just</code></td>
    </tr>
    <tr>
      <td>
        <a href=https://debian.org>Debian 13 (unreleased)</a> and
        <a href=https://ubuntu.com>Ubuntu 24.04</a> derivatives</td>
      <td><a href=https://en.wikipedia.org/wiki/APT_(software)>apt</a></td>
      <td><a href=https://packages.debian.org/trixie/just>just</a></td>
      <td><code>apt install just</code></td>
    </tr>
    <tr>
      <td><a href=https://debian.org>Debian</a> and <a href=https://ubuntu.com>Ubuntu</a> derivatives</td>
      <td><a href=https://mpr.makedeb.org>MPR</a></td>
      <td><a href=https://mpr.makedeb.org/packages/just>just</a></td>
      <td>
        <code>git clone https://mpr.makedeb.org/just</code><br>
        <code>cd just</code><br>
        <code>makedeb -si</code>
      </td>
    </tr>
    <tr>
      <td><a href=https://debian.org>Debian</a> and <a href=https://ubuntu.com>Ubuntu</a> derivatives</td>
      <td><a href=https://docs.makedeb.org/prebuilt-mpr>Prebuilt-MPR</a></td>
      <td><a href=https://mpr.makedeb.org/packages/just>just</a></td>
      <td>
        <sup><b>You must have the <a href=https://docs.makedeb.org/prebuilt-mpr/getting-started/#setting-up-the-repository>Prebuilt-MPR set up</a> on your system in order to run this command.</b></sup><br>
        <code>apt install just</code>
      </td>
    </tr>
    <tr>
      <td><a href=https://getfedora.org>Fedora</a></td>
      <td><a href=https://dnf.readthedocs.io/en/latest/>DNF</a></td>
      <td><a href=https://src.fedoraproject.org/rpms/rust-just>just</a></td>
      <td><code>dnf install just</code></td>
    </tr>
    <tr>
      <td><a href=https://www.gentoo.org>Gentoo</a></td>
      <td><a href=https://wiki.gentoo.org/wiki/Portage>Portage</a></td>
      <td><a href=https://github.com/gentoo-mirror/guru/tree/master/dev-build/just>guru/dev-build/just</a></td>
      <td>
        <code>eselect repository enable guru</code><br>
        <code>emerge --sync guru</code><br>
        <code>emerge dev-build/just</code>
      </td>
    </tr>
    <tr>
      <td><a href=https://nixos.org/nixos/>NixOS</a></td>
      <td><a href=https://nixos.org/nix/>Nix</a></td>
      <td><a href=https://github.com/NixOS/nixpkgs/blob/master/pkgs/by-name/ju/just/package.nix>just</a></td>
      <td><code>nix-env -iA nixos.just</code></td>
    </tr>
    <tr>
      <td><a href=https://opensuse.org>openSUSE</a></td>
      <td><a href=https://en.opensuse.org/Portal:Zypper>Zypper</a></td>
      <td><a href=https://build.opensuse.org/package/show/Base:System/just>just</a></td>
      <td><code>zypper in just</code></td>
    </tr>
    <tr>
      <td><a href=https://getsol.us>Solus</a></td>
      <td><a href=https://getsol.us/articles/package-management/basics/en>eopkg</a></td>
      <td><a href=https://dev.getsol.us/source/just/>just</a></td>
      <td><code>eopkg install just</code></td>
    </tr>
    <tr>
      <td><a href=https://voidlinux.org>Void</a></td>
      <td><a href=https://wiki.voidlinux.org/XBPS>XBPS</a></td>
      <td><a href=https://github.com/void-linux/void-packages/blob/master/srcpkgs/just/template>just</a></td>
      <td><code>xbps-install -S just</code></td>
    </tr>
  </tbody>
</table>
<h4 id="windows"><a class="header" href="#windows">Windows</a></h4>
<table>
  <thead>
    <tr>
      <th>Package Manager</th>
      <th>Package</th>
      <th>Command</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href=https://chocolatey.org>Chocolatey</a></td>
      <td><a href=https://github.com/michidk/just-choco>just</a></td>
      <td><code>choco install just</code></td>
    </tr>
    <tr>
      <td><a href=https://scoop.sh>Scoop</a></td>
      <td><a href=https://github.com/ScoopInstaller/Main/blob/master/bucket/just.json>just</a></td>
      <td><code>scoop install just</code></td>
    </tr>
    <tr>
      <td><a href=https://learn.microsoft.com/en-us/windows/package-manager/>Windows Package Manager</a></td>
      <td><a href=https://github.com/microsoft/winget-pkgs/tree/master/manifests/c/Casey/Just>Casey/Just</a></td>
      <td><code>winget install --id Casey.Just --exact</code></td>
    </tr>
  </tbody>
</table>
<h4 id="macos"><a class="header" href="#macos">macOS</a></h4>
<table>
  <thead>
    <tr>
      <th>Package Manager</th>
      <th>Package</th>
      <th>Command</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href=https://www.macports.org>MacPorts</a></td>
      <td><a href=https://ports.macports.org/port/just/summary>just</a></td>
      <td><code>port install just</code></td>
    </tr>
  </tbody>
</table>
<p><img src="https://repology.org/badge/vertical-allrepos/just.svg" alt="just package version table" /></p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="pre-built-binaries"><a class="header" href="#pre-built-binaries">Pre-Built Binaries</a></h3>
<p>Pre-built binaries for Linux, MacOS, and Windows can be found on
<a href="https://github.com/casey/just/releases">the releases page</a>.</p>
<p>You can use the following command on Linux, MacOS, or Windows to download the
latest release, just replace <code>DEST</code> with the directory where you’d like to put
<code>just</code>:</p>
<pre><code class="language-console">curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to DEST
</code></pre>
<p>For example, to install <code>just</code> to <code>~/bin</code>:</p>
<pre><code class="language-console"># create ~/bin
mkdir -p ~/bin

# download and extract just to ~/bin/just
curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to ~/bin

# add `~/bin` to the paths that your shell searches for executables
# this line should be added to your shells initialization file,
# e.g. `~/.bashrc` or `~/.zshrc`
export PATH="$PATH:$HOME/bin"

# just should now be executable
just --help
</code></pre>
<p>Note that <code>install.sh</code> may fail on GitHub Actions, or in other environments
where many machines share IP addresses. <code>install.sh</code> calls GitHub APIs in order
to determine the latest version of <code>just</code> to install, and those API calls are
rate-limited on a per-IP basis. To make <code>install.sh</code> more reliable in such
circumstances, pass a specific tag to install with <code>--tag</code>.</p>
<p>Another way to avoid rate-limiting is to pass a GitHub authentication token to
<code>install.sh</code> as an environment variable named <code>GITHUB_TOKEN</code>, allowing it to
authenticate its requests.</p>
<p><a href="https://github.com/casey/just/releases">Releases</a> include a <code>SHA256SUM</code> file
which can be used to verify the integrity of pre-built binary archives.</p>
<p>To verify a release, download the pre-built binary archive along with the
<code>SHA256SUM</code> file and run:</p>
<pre><code class="language-sh">shasum --algorithm 256 --ignore-missing --check SHA256SUMS
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="github-actions"><a class="header" href="#github-actions">GitHub Actions</a></h3>
<p><code>just</code> can be installed on GitHub Actions in a few ways.</p>
<p>Using package managers pre-installed on GitHub Actions runners on MacOS with
<code>brew install just</code>, and on Windows with <code>choco install just</code>.</p>
<p>With <a href="https://github.com/extractions/setup-just">extractions/setup-just</a>:</p>
<pre><code class="language-yaml">- uses: extractions/setup-just@v3
  with:
    just-version: 1.5.0  # optional semver specification, otherwise latest
</code></pre>
<p>Or with <a href="https://github.com/taiki-e/install-action">taiki-e/install-action</a>:</p>
<pre><code class="language-yaml">- uses: taiki-e/install-action@just
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="release-rss-feed"><a class="header" href="#release-rss-feed">Release RSS Feed</a></h3>
<p>An <a href="https://en.wikipedia.org/wiki/RSS">RSS feed</a> of <code>just</code> releases is available <a href="https://github.com/casey/just/releases.atom">here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="nodejs-installation"><a class="header" href="#nodejs-installation">Node.js Installation</a></h3>
<p><a href="https://npmjs.com/package/just-install">just-install</a> can be used to automate
installation of <code>just</code> in Node.js applications.</p>
<p><code>just</code> is a great, more robust alternative to npm scripts. If you want to
include <code>just</code> in the dependencies of a Node.js application, <code>just-install</code>
will install a local, platform-specific binary as part of the <code>npm install</code>
command. This removes the need for every developer to install <code>just</code>
independently using one of the processes mentioned above. After installation,
the <code>just</code> command will work in npm scripts or with npx. It’s great for teams
who want to make the set up process for their project as easy as possible.</p>
<p>For more information, see the
<a href="https://github.com/brombal/just-install#readme">just-install README file</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="backwards-compatibility"><a class="header" href="#backwards-compatibility">Backwards Compatibility</a></h2>
<p>With the release of version 1.0, <code>just</code> features a strong commitment to
backwards compatibility and stability.</p>
<p>Future releases will not introduce backwards incompatible changes that make
existing <code>justfile</code>s stop working, or break working invocations of the
command-line interface.</p>
<p>This does not, however, preclude fixing outright bugs, even if doing so might
break <code>justfiles</code> that rely on their behavior.</p>
<p>There will never be a <code>just</code> 2.0. Any desirable backwards-incompatible changes
will be opt-in on a per-<code>justfile</code> basis, so users may migrate at their
leisure.</p>
<p>Features that aren’t yet ready for stabilization are marked as unstable and may
be changed or removed at any time. Using unstable features produces an error by
default, which can be suppressed with by passing the <code>--unstable</code> flag,
<code>set unstable</code>, or setting the environment variable <code>JUST_UNSTABLE</code>, to any
value other than <code>false</code>, <code>0</code>, or the empty string.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="editor-support"><a class="header" href="#editor-support">Editor Support</a></h2>
<p><code>justfile</code> syntax is close enough to <code>make</code> that you may want to tell your
editor to use <code>make</code> syntax highlighting for <code>just</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="vim-and-neovim"><a class="header" href="#vim-and-neovim">Vim and Neovim</a></h3>
<p>Vim version 9.1.1042 or better and Neovim version 0.11 or better support
Justfile syntax highlighting out of the box, thanks to
<a href="https://github.com/pbnj">pbnj</a>.</p>
<h4 id="vim-just"><a class="header" href="#vim-just"><code>vim-just</code></a></h4>
<p>The <a href="https://github.com/NoahTheDuke/vim-just">vim-just</a> plugin provides syntax
highlighting for <code>justfile</code>s.</p>
<p>Install it with your favorite package manager, like
<a href="https://github.com/junegunn/vim-plug">Plug</a>:</p>
<pre><code class="language-vim">call plug#begin()

Plug 'NoahTheDuke/vim-just'

call plug#end()
</code></pre>
<p>Or with Vim’s built-in package support:</p>
<pre><code class="language-console">mkdir -p ~/.vim/pack/vendor/start
cd ~/.vim/pack/vendor/start
git clone https://github.com/NoahTheDuke/vim-just.git
</code></pre>
<h4 id="tree-sitter-just"><a class="header" href="#tree-sitter-just"><code>tree-sitter-just</code></a></h4>
<p><a href="https://github.com/IndianBoy42/tree-sitter-just">tree-sitter-just</a> is an
<a href="https://github.com/nvim-treesitter/nvim-treesitter">Nvim Treesitter</a> plugin
for Neovim.</p>
<h4 id="makefile-syntax-highlighting"><a class="header" href="#makefile-syntax-highlighting">Makefile Syntax Highlighting</a></h4>
<p>Vim’s built-in makefile syntax highlighting isn’t perfect for <code>justfile</code>s, but
it’s better than nothing. You can put the following in <code>~/.vim/filetype.vim</code>:</p>
<pre><code class="language-vimscript">if exists("did_load_filetypes")
  finish
endif

augroup filetypedetect
  au BufNewFile,BufRead justfile setf make
augroup END
</code></pre>
<p>Or add the following to an individual <code>justfile</code> to enable <code>make</code> mode on a
per-file basis:</p>
<pre><code class="language-text"># vim: set ft=make :
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="emacs"><a class="header" href="#emacs">Emacs</a></h3>
<p><a href="https://github.com/leon-barrett/just-mode.el">just-mode</a> provides syntax
highlighting and automatic indentation of <code>justfile</code>s. It is available on
<a href="https://melpa.org/">MELPA</a> as <a href="https://melpa.org/#/just-mode">just-mode</a>.</p>
<p><a href="https://github.com/psibi/justl.el">justl</a> provides commands for executing and
listing recipes.</p>
<p>You can add the following to an individual <code>justfile</code> to enable <code>make</code> mode on
a per-file basis:</p>
<pre><code class="language-text"># Local Variables:
# mode: makefile
# End:
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="visual-studio-code"><a class="header" href="#visual-studio-code">Visual Studio Code</a></h3>
<p>An extension for VS Code is <a href="https://github.com/nefrob/vscode-just">available here</a>.</p>
<p>Unmaintained VS Code extensions include
<a href="https://github.com/skellock/vscode-just">skellock/vscode-just</a> and
<a href="https://github.com/sclu1034/vscode-just">sclu1034/vscode-just</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="jetbrains-ides"><a class="header" href="#jetbrains-ides">JetBrains IDEs</a></h3>
<p>A plugin for JetBrains IDEs by <a href="https://github.com/linux-china">linux_china</a> is
<a href="https://plugins.jetbrains.com/plugin/18658-just">available here</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="kakoune"><a class="header" href="#kakoune">Kakoune</a></h3>
<p>Kakoune supports <code>justfile</code> syntax highlighting out of the box, thanks to
TeddyDD.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="helix"><a class="header" href="#helix">Helix</a></h3>
<p><a href="https://helix-editor.com/">Helix</a> supports <code>justfile</code> syntax highlighting
out-of-the-box since version 23.05.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="sublime-text"><a class="header" href="#sublime-text">Sublime Text</a></h3>
<p>The <a href="https://github.com/nk9/just_sublime">Just package</a> by
<a href="https://github.com/nk9">nk9</a> with <code>just</code> syntax and some other tools is
available on <a href="https://packagecontrol.io/packages/Just">PackageControl</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="micro"><a class="header" href="#micro">Micro</a></h3>
<p><a href="https://micro-editor.github.io/">Micro</a> supports Justfile syntax highlighting
out of the box, thanks to <a href="https://github.com/tomodachi94">tomodachi94</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="zed"><a class="header" href="#zed">Zed</a></h3>
<p>The <a href="https://github.com/jackTabsCode/zed-just/">zed-just</a> extension by
<a href="https://github.com/jackTabsCode">jackTabsCode</a> is avilable on the
<a href="https://zed.dev/extensions?query=just">Zed extensions page</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="other-editors"><a class="header" href="#other-editors">Other Editors</a></h3>
<p>Feel free to send me the commands necessary to get syntax highlighting working
in your editor of choice so that I may include them here.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<p>See the installation section for how to install <code>just</code> on your computer. Try
running <code>just --version</code> to make sure that it’s installed correctly.</p>
<p>For an overview of the syntax, check out
<a href="https://cheatography.com/linux-china/cheat-sheets/justfile/">this cheatsheet</a>.</p>
<p>Once <code>just</code> is installed and working, create a file named <code>justfile</code> in the
root of your project with the following contents:</p>
<pre><code class="language-just">recipe-name:
  echo 'This is a recipe!'

# this is a comment
another-recipe:
  @echo 'This is another recipe.'
</code></pre>
<p>When you invoke <code>just</code> it looks for file <code>justfile</code> in the current directory
and upwards, so you can invoke it from any subdirectory of your project.</p>
<p>The search for a <code>justfile</code> is case insensitive, so any case, like <code>Justfile</code>,
<code>JUSTFILE</code>, or <code>JuStFiLe</code>, will work. <code>just</code> will also look for files with the
name <code>.justfile</code>, in case you’d like to hide a <code>justfile</code>.</p>
<p>Running <code>just</code> with no arguments runs the first recipe in the <code>justfile</code>:</p>
<pre><code class="language-console">$ just
echo 'This is a recipe!'
This is a recipe!
</code></pre>
<p>One or more arguments specify the recipe(s) to run:</p>
<pre><code class="language-console">$ just another-recipe
This is another recipe.
</code></pre>
<p><code>just</code> prints each command to standard error before running it, which is why
<code>echo 'This is a recipe!'</code> was printed. This is suppressed for lines starting
with <code>@</code>, which is why <code>echo 'This is another recipe.'</code> was not printed.</p>
<p>Recipes stop running if a command fails. Here <code>cargo publish</code> will only run if
<code>cargo test</code> succeeds:</p>
<pre><code class="language-just">publish:
  cargo test
  # tests passed, time to publish!
  cargo publish
</code></pre>
<p>Recipes can depend on other recipes. Here the <code>test</code> recipe depends on the
<code>build</code> recipe, so <code>build</code> will run before <code>test</code>:</p>
<pre><code class="language-just">build:
  cc main.c foo.c bar.c -o main

test: build
  ./test

sloc:
  @echo "`wc -l *.c` lines of code"
</code></pre>
<pre><code class="language-console">$ just test
cc main.c foo.c bar.c -o main
./test
testing… all tests passed!
</code></pre>
<p>Recipes without dependencies will run in the order they’re given on the command
line:</p>
<pre><code class="language-console">$ just build sloc
cc main.c foo.c bar.c -o main
1337 lines of code
</code></pre>
<p>Dependencies will always run first, even if they are passed after a recipe that
depends on them:</p>
<pre><code class="language-console">$ just test build
cc main.c foo.c bar.c -o main
./test
testing… all tests passed!
</code></pre>
<p>Recipes may depend on recipes in submodules:</p>
<pre><code class="language-justfile">mod foo

baz: foo::bar
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>A variety of <code>justfile</code>s can be found in the
<a href="https://github.com/casey/just/tree/master/examples">examples directory</a> and on
<a href="https://github.com/search?q=path%3A**%2Fjustfile&amp;type=code">GitHub</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="the-default-recipe"><a class="header" href="#the-default-recipe">The Default Recipe</a></h3>
<p>When <code>just</code> is invoked without a recipe, it runs the first recipe in the
<code>justfile</code>. This recipe might be the most frequently run command in the
project, like running the tests:</p>
<pre><code class="language-just">test:
  cargo test
</code></pre>
<p>You can also use dependencies to run multiple recipes by default:</p>
<pre><code class="language-just">default: lint build test

build:
  echo Building…

test:
  echo Testing…

lint:
  echo Linting…
</code></pre>
<p>If no recipe makes sense as the default recipe, you can add a recipe to the
beginning of your <code>justfile</code> that lists the available recipes:</p>
<pre><code class="language-just">default:
  just --list
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="listing-available-recipes"><a class="header" href="#listing-available-recipes">Listing Available Recipes</a></h3>
<p>Recipes can be listed in alphabetical order with <code>just --list</code>:</p>
<pre><code class="language-console">$ just --list
Available recipes:
    build
    test
    deploy
    lint
</code></pre>
<p>Recipes in <a href="modules1190.html">submodules</a> can be listed with <code>just --list PATH</code>,
where <code>PATH</code> is a space- or <code>::</code>-separated module path:</p>
<pre><code>$ cat justfile
mod foo
$ cat foo.just
mod bar
$ cat bar.just
baz:
$ just foo bar
Available recipes:
    baz
$ just foo::bar
Available recipes:
    baz
</code></pre>
<p><code>just --summary</code> is more concise:</p>
<pre><code class="language-console">$ just --summary
build test deploy lint
</code></pre>
<p>Pass <code>--unsorted</code> to print recipes in the order they appear in the <code>justfile</code>:</p>
<pre><code class="language-just">test:
  echo 'Testing!'

build:
  echo 'Building!'
</code></pre>
<pre><code class="language-console">$ just --list --unsorted
Available recipes:
    test
    build
</code></pre>
<pre><code class="language-console">$ just --summary --unsorted
test build
</code></pre>
<p>If you’d like <code>just</code> to default to listing the recipes in the <code>justfile</code>, you
can use this as your default recipe:</p>
<pre><code class="language-just">default:
  @just --list
</code></pre>
<p>Note that you may need to add <code>--justfile {{justfile()}}</code> to the line above.
Without it, if you executed <code>just -f /some/distant/justfile -d .</code> or
<code>just -f ./non-standard-justfile</code>, the plain <code>just --list</code> inside the recipe
would not necessarily use the file you provided. It would try to find a
justfile in your current path, maybe even resulting in a <code>No justfile found</code>
error.</p>
<p>The heading text can be customized with <code>--list-heading</code>:</p>
<pre><code class="language-console">$ just --list --list-heading $'Cool stuff…\n'
Cool stuff…
    test
    build
</code></pre>
<p>And the indentation can be customized with <code>--list-prefix</code>:</p>
<pre><code class="language-console">$ just --list --list-prefix ····
Available recipes:
····test
····build
</code></pre>
<p>The argument to <code>--list-heading</code> replaces both the heading and the newline
following it, so it should contain a newline if non-empty. It works this way so
you can suppress the heading line entirely by passing the empty string:</p>
<pre><code class="language-console">$ just --list --list-heading ''
    test
    build
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="invoking-multiple-recipes"><a class="header" href="#invoking-multiple-recipes">Invoking Multiple Recipes</a></h3>
<p>Multiple recipes may be invoked on the command line at once:</p>
<pre><code class="language-just">build:
  make web

serve:
  python3 -m http.server -d out 8000
</code></pre>
<pre><code class="language-console">$ just build serve
make web
python3 -m http.server -d out 8000
</code></pre>
<p>Keep in mind that recipes with parameters will swallow arguments, even if they
match the names of other recipes:</p>
<pre><code class="language-just">build project:
  make {{project}}

serve:
  python3 -m http.server -d out 8000
</code></pre>
<pre><code class="language-console">$ just build serve
make: *** No rule to make target `serve'.  Stop.
</code></pre>
<p>The <code>--one</code> flag can be used to restrict command-line invocations to a single
recipe:</p>
<pre><code class="language-console">$ just --one build serve
error: Expected 1 command-line recipe invocation but found 2.
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="working-directory"><a class="header" href="#working-directory">Working Directory</a></h3>
<p>By default, recipes run with the working directory set to the directory that
contains the <code>justfile</code>.</p>
<p>The <code>[no-cd]</code> attribute can be used to make recipes run with the working
directory set to directory in which <code>just</code> was invoked.</p>
<pre><code class="language-just">@foo:
  pwd

[no-cd]
@bar:
  pwd
</code></pre>
<pre><code class="language-console">$ cd subdir
$ just foo
/
$ just bar
/subdir
</code></pre>
<p>You can override the working directory for all recipes with
<code>set working-directory := '…'</code>:</p>
<pre><code class="language-just">set working-directory := 'bar'

@foo:
  pwd
</code></pre>
<pre><code class="language-console">$ pwd
/home/bob
$ just foo
/home/bob/bar
</code></pre>
<p>You can override the working directory for a specific recipe with the
<code>working-directory</code> attribute<sup>1.38.0</sup>:</p>
<pre><code class="language-just">[working-directory: 'bar']
@foo:
  pwd
</code></pre>
<pre><code class="language-console">$ pwd
/home/bob
$ just foo
/home/bob/bar
</code></pre>
<p>The argument to the <code>working-directory</code> setting or <code>working-directory</code>
attribute may be absolute or relative. If it is relative it is interpreted
relative to the default working directory.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="aliases"><a class="header" href="#aliases">Aliases</a></h3>
<p>Aliases allow recipes to be invoked on the command line with alternative names:</p>
<pre><code class="language-just">alias b := build

build:
  echo 'Building!'
</code></pre>
<pre><code class="language-console">$ just b
echo 'Building!'
Building!
</code></pre>
<p>The target of an alias may be a recipe in a submodule:</p>
<pre><code class="language-justfile">mod foo

alias baz := foo::bar
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="settings"><a class="header" href="#settings">Settings</a></h3>
<p>Settings control interpretation and execution. Each setting may be specified at
most once, anywhere in the <code>justfile</code>.</p>
<p>For example:</p>
<pre><code class="language-just">set shell := ["zsh", "-cu"]

foo:
  # this line will be run as `zsh -cu 'ls **/*.txt'`
  ls **/*.txt
</code></pre>
<h4 id="table-of-settings"><a class="header" href="#table-of-settings">Table of Settings</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Value</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>allow-duplicate-recipes</code></td><td>boolean</td><td><code>false</code></td><td>Allow recipes appearing later in a <code>justfile</code> to override earlier recipes with the same name.</td></tr>
<tr><td><code>allow-duplicate-variables</code></td><td>boolean</td><td><code>false</code></td><td>Allow variables appearing later in a <code>justfile</code> to override earlier variables with the same name.</td></tr>
<tr><td><code>dotenv-filename</code></td><td>string</td><td>-</td><td>Load a <code>.env</code> file with a custom name, if present.</td></tr>
<tr><td><code>dotenv-load</code></td><td>boolean</td><td><code>false</code></td><td>Load a <code>.env</code> file, if present.</td></tr>
<tr><td><code>dotenv-override</code></td><td>boolean</td><td><code>false</code></td><td>Override existing environment variables with values from the <code>.env</code> file.</td></tr>
<tr><td><code>dotenv-path</code></td><td>string</td><td>-</td><td>Load a <code>.env</code> file from a custom path and error if not present. Overrides <code>dotenv-filename</code>.</td></tr>
<tr><td><code>dotenv-required</code></td><td>boolean</td><td><code>false</code></td><td>Error if a <code>.env</code> file isn’t found.</td></tr>
<tr><td><code>export</code></td><td>boolean</td><td><code>false</code></td><td>Export all variables as environment variables.</td></tr>
<tr><td><code>fallback</code></td><td>boolean</td><td><code>false</code></td><td>Search <code>justfile</code> in parent directory if the first recipe on the command line is not found.</td></tr>
<tr><td><code>ignore-comments</code></td><td>boolean</td><td><code>false</code></td><td>Ignore recipe lines beginning with <code>#</code>.</td></tr>
<tr><td><code>positional-arguments</code></td><td>boolean</td><td><code>false</code></td><td>Pass positional arguments.</td></tr>
<tr><td><code>quiet</code></td><td>boolean</td><td><code>false</code></td><td>Disable echoing recipe lines before executing.</td></tr>
<tr><td><code>script-interpreter</code><sup>1.33.0</sup></td><td><code>[COMMAND, ARGS…]</code></td><td><code>['sh', '-eu']</code></td><td>Set command used to invoke recipes with empty <code>[script]</code> attribute.</td></tr>
<tr><td><code>shell</code></td><td><code>[COMMAND, ARGS…]</code></td><td>-</td><td>Set command used to invoke recipes and evaluate backticks.</td></tr>
<tr><td><code>tempdir</code></td><td>string</td><td>-</td><td>Create temporary directories in <code>tempdir</code> instead of the system default temporary directory.</td></tr>
<tr><td><code>unstable</code><sup>1.31.0</sup></td><td>boolean</td><td><code>false</code></td><td>Enable unstable features.</td></tr>
<tr><td><code>windows-powershell</code></td><td>boolean</td><td><code>false</code></td><td>Use PowerShell on Windows as default shell. (Deprecated. Use <code>windows-shell</code> instead.</td></tr>
<tr><td><code>windows-shell</code></td><td><code>[COMMAND, ARGS…]</code></td><td>-</td><td>Set the command used to invoke recipes and evaluate backticks.</td></tr>
<tr><td><code>working-directory</code><sup>1.33.0</sup></td><td>string</td><td>-</td><td>Set the working directory for recipes and backticks, relative to the default working directory.</td></tr>
</tbody></table>
</div>
<p>Boolean settings can be written as:</p>
<pre><code class="language-justfile">set NAME
</code></pre>
<p>Which is equivalent to:</p>
<pre><code class="language-justfile">set NAME := true
</code></pre>
<h4 id="allow-duplicate-recipes"><a class="header" href="#allow-duplicate-recipes">Allow Duplicate Recipes</a></h4>
<p>If <code>allow-duplicate-recipes</code> is set to <code>true</code>, defining multiple recipes with
the same name is not an error and the last definition is used. Defaults to
<code>false</code>.</p>
<pre><code class="language-just">set allow-duplicate-recipes

@foo:
  echo foo

@foo:
  echo bar
</code></pre>
<pre><code class="language-console">$ just foo
bar
</code></pre>
<h4 id="allow-duplicate-variables"><a class="header" href="#allow-duplicate-variables">Allow Duplicate Variables</a></h4>
<p>If <code>allow-duplicate-variables</code> is set to <code>true</code>, defining multiple variables
with the same name is not an error and the last definition is used. Defaults to
<code>false</code>.</p>
<pre><code class="language-just">set allow-duplicate-variables

a := "foo"
a := "bar"

@foo:
  echo {{a}}
</code></pre>
<pre><code class="language-console">$ just foo
bar
</code></pre>
<h4 id="dotenv-settings"><a class="header" href="#dotenv-settings">Dotenv Settings</a></h4>
<p>If any of <code>dotenv-load</code>, <code>dotenv-filename</code>, <code>dotenv-override</code>, <code>dotenv-path</code>,
or <code>dotenv-required</code> are set, <code>just</code> will try to load environment variables
from a file.</p>
<p>If <code>dotenv-path</code> is set, <code>just</code> will look for a file at the given path, which
may be absolute, or relative to the working directory.</p>
<p>The command-line option <code>--dotenv-path</code>, short form <code>-E</code>, can be used to set or
override <code>dotenv-path</code> at runtime.</p>
<p>If <code>dotenv-filename</code> is set <code>just</code> will look for a file at the given path,
relative to the working directory and each of its ancestors.</p>
<p>If <code>dotenv-filename</code> is not set, but <code>dotenv-load</code> or <code>dotenv-required</code> are
set, just will look for a file named <code>.env</code>, relative to the working directory
and each of its ancestors.</p>
<p><code>dotenv-filename</code> and <code>dotenv-path</code> are similar, but <code>dotenv-path</code> is only
checked relative to the working directory, whereas <code>dotenv-filename</code> is checked
relative to the working directory and each of its ancestors.</p>
<p>It is not an error if an environment file is not found, unless
<code>dotenv-required</code> is set.</p>
<p>The loaded variables are environment variables, not <code>just</code> variables, and so
must be accessed using <code>$VARIABLE_NAME</code> in recipes and backticks.</p>
<p>If <code>dotenv-override</code> is set, variables from the environment file will override
existing environment variables.</p>
<p>For example, if your <code>.env</code> file contains:</p>
<pre><code class="language-console"># a comment, will be ignored
DATABASE_ADDRESS=localhost:6379
SERVER_PORT=1337
</code></pre>
<p>And your <code>justfile</code> contains:</p>
<pre><code class="language-just">set dotenv-load

serve:
  @echo "Starting server with database $DATABASE_ADDRESS on port $SERVER_PORT…"
  ./server --database $DATABASE_ADDRESS --port $SERVER_PORT
</code></pre>
<p><code>just serve</code> will output:</p>
<pre><code class="language-console">$ just serve
Starting server with database localhost:6379 on port 1337…
./server --database $DATABASE_ADDRESS --port $SERVER_PORT
</code></pre>
<h4 id="export"><a class="header" href="#export">Export</a></h4>
<p>The <code>export</code> setting causes all <code>just</code> variables to be exported as environment
variables. Defaults to <code>false</code>.</p>
<pre><code class="language-just">set export

a := "hello"

@foo b:
  echo $a
  echo $b
</code></pre>
<pre><code class="language-console">$ just foo goodbye
hello
goodbye
</code></pre>
<h4 id="positional-arguments"><a class="header" href="#positional-arguments">Positional Arguments</a></h4>
<p>If <code>positional-arguments</code> is <code>true</code>, recipe arguments will be passed as
positional arguments to commands. For linewise recipes, argument <code>$0</code> will be
the name of the recipe.</p>
<p>For example, running this recipe:</p>
<pre><code class="language-just">set positional-arguments

@foo bar:
  echo $0
  echo $1
</code></pre>
<p>Will produce the following output:</p>
<pre><code class="language-console">$ just foo hello
foo
hello
</code></pre>
<p>When using an <code>sh</code>-compatible shell, such as <code>bash</code> or <code>zsh</code>, <code>$@</code> expands to
the positional arguments given to the recipe, starting from one. When used
within double quotes as <code>"$@"</code>, arguments including whitespace will be passed
on as if they were double-quoted. That is, <code>"$@"</code> is equivalent to <code>"$1" "$2"</code>…
When there are no positional parameters, <code>"$@"</code> and <code>$@</code> expand to nothing
(i.e., they are removed).</p>
<p>This example recipe will print arguments one by one on separate lines:</p>
<pre><code class="language-just">set positional-arguments

@test *args='':
  bash -c 'while (( "$#" )); do echo - $1; shift; done' -- "$@"
</code></pre>
<p>Running it with <em>two</em> arguments:</p>
<pre><code class="language-console">$ just test foo "bar baz"
- foo
- bar baz
</code></pre>
<p>Positional arguments may also be turned on on a per-recipe basis with the
<code>[positional-arguments]</code> attribute<sup>1.29.0</sup>:</p>
<pre><code class="language-just">[positional-arguments]
@foo bar:
  echo $0
  echo $1
</code></pre>
<p>Note that PowerShell does not handle positional arguments in the same way as
other shells, so turning on positional arguments will likely break recipes that
use PowerShell.</p>
<p>If using PowerShell 7.4 or better, the <code>-CommandWithArgs</code> flag will make
positional arguments work as expected:</p>
<pre><code class="language-just">set shell := ['pwsh.exe', '-CommandWithArgs']
set positional-arguments

print-args a b c:
  Write-Output @($args[1..($args.Count - 1)])
</code></pre>
<h4 id="shell"><a class="header" href="#shell">Shell</a></h4>
<p>The <code>shell</code> setting controls the command used to invoke recipe lines and
backticks. Shebang recipes are unaffected. The default shell is <code>sh -cu</code>.</p>
<pre><code class="language-just"># use python3 to execute recipe lines and backticks
set shell := ["python3", "-c"]

# use print to capture result of evaluation
foos := `print("foo" * 4)`

foo:
  print("Snake snake snake snake.")
  print("{{foos}}")
</code></pre>
<p><code>just</code> passes the command to be executed as an argument. Many shells will need
an additional flag, often <code>-c</code>, to make them evaluate the first argument.</p>
<h5 id="windows-shell"><a class="header" href="#windows-shell">Windows Shell</a></h5>
<p><code>just</code> uses <code>sh</code> on Windows by default. To use a different shell on Windows,
use <code>windows-shell</code>:</p>
<pre><code class="language-just">set windows-shell := ["powershell.exe", "-NoLogo", "-Command"]

hello:
  Write-Host "Hello, world!"
</code></pre>
<p>See
<a href="https://github.com/casey/just/blob/master/examples/powershell.just">powershell.just</a>
for a justfile that uses PowerShell on all platforms.</p>
<h5 id="windows-powershell"><a class="header" href="#windows-powershell">Windows PowerShell</a></h5>
<p><em><code>set windows-powershell</code> uses the legacy <code>powershell.exe</code> binary, and is no
longer recommended. See the <code>windows-shell</code> setting above for a more flexible
way to control which shell is used on Windows.</em></p>
<p><code>just</code> uses <code>sh</code> on Windows by default. To use <code>powershell.exe</code> instead, set
<code>windows-powershell</code> to true.</p>
<pre><code class="language-just">set windows-powershell := true

hello:
  Write-Host "Hello, world!"
</code></pre>
<h5 id="python-3"><a class="header" href="#python-3">Python 3</a></h5>
<pre><code class="language-just">set shell := ["python3", "-c"]
</code></pre>
<h5 id="bash"><a class="header" href="#bash">Bash</a></h5>
<pre><code class="language-just">set shell := ["bash", "-uc"]
</code></pre>
<h5 id="z-shell"><a class="header" href="#z-shell">Z Shell</a></h5>
<pre><code class="language-just">set shell := ["zsh", "-uc"]
</code></pre>
<h5 id="fish"><a class="header" href="#fish">Fish</a></h5>
<pre><code class="language-just">set shell := ["fish", "-c"]
</code></pre>
<h5 id="nushell"><a class="header" href="#nushell">Nushell</a></h5>
<pre><code class="language-just">set shell := ["nu", "-c"]
</code></pre>
<p>If you want to change the default table mode to <code>light</code>:</p>
<pre><code class="language-just">set shell := ['nu', '-m', 'light', '-c']
</code></pre>
<p><em><a href="https://github.com/nushell/nushell">Nushell</a> was written in Rust, and <strong>has
cross-platform support for Windows / macOS and Linux</strong>.</em></p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="documentation-comments"><a class="header" href="#documentation-comments">Documentation Comments</a></h3>
<p>Comments immediately preceding a recipe will appear in <code>just --list</code>:</p>
<pre><code class="language-just"># build stuff
build:
  ./bin/build

# test stuff
test:
  ./bin/test
</code></pre>
<pre><code class="language-console">$ just --list
Available recipes:
    build # build stuff
    test # test stuff
</code></pre>
<p>The <code>[doc]</code> attribute can be used to set or suppress a recipe’s doc comment:</p>
<pre><code class="language-just"># This comment won't appear
[doc('Build stuff')]
build:
  ./bin/build

# This one won't either
[doc]
test:
  ./bin/test
</code></pre>
<pre><code class="language-console">$ just --list
Available recipes:
    build # Build stuff
    test
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="expressions-and-substitutions"><a class="header" href="#expressions-and-substitutions">Expressions and Substitutions</a></h3>
<p>Various operators and function calls are supported in expressions, which may be
used in assignments, default recipe arguments, and inside recipe body <code>{{…}}</code>
substitutions.</p>
<pre><code class="language-just">tmpdir  := `mktemp -d`
version := "0.2.7"
tardir  := tmpdir / "awesomesauce-" + version
tarball := tardir + ".tar.gz"
config  := quote(config_dir() / ".project-config")

publish:
  rm -f {{tarball}}
  mkdir {{tardir}}
  cp README.md *.c {{ config }} {{tardir}}
  tar zcvf {{tarball}} {{tardir}}
  scp {{tarball}} me@server.com:release/
  rm -rf {{tarball}} {{tardir}}
</code></pre>
<h4 id="concatenation"><a class="header" href="#concatenation">Concatenation</a></h4>
<p>The <code>+</code> operator returns the left-hand argument concatenated with the
right-hand argument:</p>
<pre><code class="language-just">foobar := 'foo' + 'bar'
</code></pre>
<h4 id="logical-operators"><a class="header" href="#logical-operators">Logical Operators</a></h4>
<p>The logical operators <code>&amp;&amp;</code> and <code>||</code> can be used to coalesce string
values<sup>1.37.0</sup>, similar to Python’s <code>and</code> and <code>or</code>. These operators
consider the empty string <code>''</code> to be false, and all other strings to be true.</p>
<p>These operators are currently unstable.</p>
<p>The <code>&amp;&amp;</code> operator returns the empty string if the left-hand argument is the
empty string, otherwise it returns the right-hand argument:</p>
<pre><code class="language-justfile">foo := '' &amp;&amp; 'goodbye'      # ''
bar := 'hello' &amp;&amp; 'goodbye' # 'goodbye'
</code></pre>
<p>The <code>||</code> operator returns the left-hand argument if it is non-empty, otherwise
it returns the right-hand argument:</p>
<pre><code class="language-justfile">foo := '' || 'goodbye'      # 'goodbye'
bar := 'hello' || 'goodbye' # 'hello'
</code></pre>
<h4 id="joining-paths"><a class="header" href="#joining-paths">Joining Paths</a></h4>
<p>The <code>/</code> operator can be used to join two strings with a slash:</p>
<pre><code class="language-just">foo := "a" / "b"
</code></pre>
<pre><code>$ just --evaluate foo
a/b
</code></pre>
<p>Note that a <code>/</code> is added even if one is already present:</p>
<pre><code class="language-just">foo := "a/"
bar := foo / "b"
</code></pre>
<pre><code>$ just --evaluate bar
a//b
</code></pre>
<p>Absolute paths can also be constructed<sup>1.5.0</sup>:</p>
<pre><code class="language-just">foo := / "b"
</code></pre>
<pre><code>$ just --evaluate foo
/b
</code></pre>
<p>The <code>/</code> operator uses the <code>/</code> character, even on Windows. Thus, using the <code>/</code>
operator should be avoided with paths that use universal naming convention
(UNC), i.e., those that start with <code>\?</code>, since forward slashes are not
supported with UNC paths.</p>
<h4 id="escaping-"><a class="header" href="#escaping-">Escaping <code>{{</code></a></h4>
<p>To write a recipe containing <code>{{</code>, use <code>{{{{</code>:</p>
<pre><code class="language-just">braces:
  echo 'I {{{{LOVE}} curly braces!'
</code></pre>
<p>(An unmatched <code>}}</code> is ignored, so it doesn’t need to be escaped.)</p>
<p>Another option is to put all the text you’d like to escape inside of an
interpolation:</p>
<pre><code class="language-just">braces:
  echo '{{'I {{LOVE}} curly braces!'}}'
</code></pre>
<p>Yet another option is to use <code>{{ "{{" }}</code>:</p>
<pre><code class="language-just">braces:
  echo 'I {{ "{{" }}LOVE}} curly braces!'
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="strings"><a class="header" href="#strings">Strings</a></h3>
<p><code>'single'</code>, <code>"double"</code>, and <code>'''triple'''</code> quoted string literals are
supported. Unlike in recipe bodies, <code>{{…}}</code> interpolations are not supported
inside strings.</p>
<p>Double-quoted strings support escape sequences:</p>
<pre><code class="language-just">carriage-return   := "\r"
double-quote      := "\""
newline           := "\n"
no-newline        := "\
"
slash             := "\\"
tab               := "\t"
unicode-codepoint := "\u{1F916}"
</code></pre>
<pre><code class="language-console">$ just --evaluate
"arriage-return   := "
double-quote      := """
newline           := "
"
no-newline        := ""
slash             := "\"
tab               := "     "
unicode-codepoint := "🤖"
</code></pre>
<p>The unicode character escape sequence <code>\u{…}</code><sup>1.36.0</sup> accepts up to
six hex digits.</p>
<p>Strings may contain line breaks:</p>
<pre><code class="language-just">single := '
hello
'

double := "
goodbye
"
</code></pre>
<p>Single-quoted strings do not recognize escape sequences:</p>
<pre><code class="language-just">escapes := '\t\n\r\"\\'
</code></pre>
<pre><code class="language-console">$ just --evaluate
escapes := "\t\n\r\"\\"
</code></pre>
<p>Indented versions of both single- and double-quoted strings, delimited by
triple single- or double-quotes, are supported. Indented string lines are
stripped of a leading line break, and leading whitespace common to all
non-blank lines:</p>
<pre><code class="language-just"># this string will evaluate to `foo\nbar\n`
x := '''
  foo
  bar
'''

# this string will evaluate to `abc\n  wuv\nxyz\n`
y := """
  abc
    wuv
  xyz
"""
</code></pre>
<p>Similar to unindented strings, indented double-quoted strings process escape
sequences, and indented single-quoted strings ignore escape sequences. Escape
sequence processing takes place after unindentation. The unindentation
algorithm does not take escape-sequence produced whitespace or newlines into
account.</p>
<p>Strings prefixed with <code>x</code> are shell expanded<sup>1.27.0</sup>:</p>
<pre><code class="language-justfile">foobar := x'~/$FOO/${BAR}'
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Value</th><th>Replacement</th></tr></thead><tbody>
<tr><td><code>$VAR</code></td><td>value of environment variable <code>VAR</code></td></tr>
<tr><td><code>${VAR}</code></td><td>value of environment variable <code>VAR</code></td></tr>
<tr><td><code>${VAR:-DEFAULT}</code></td><td>value of environment variable <code>VAR</code>, or <code>DEFAULT</code> if <code>VAR</code> is not set</td></tr>
<tr><td>Leading <code>~</code></td><td>path to current user’s home directory</td></tr>
<tr><td>Leading <code>~USER</code></td><td>path to <code>USER</code>’s home directory</td></tr>
</tbody></table>
</div>
<p>This expansion is performed at compile time, so variables from <code>.env</code> files and
exported <code>just</code> variables cannot be used. However, this allows shell expanded
strings to be used in places like settings and import paths, which cannot
depend on <code>just</code> variables and <code>.env</code> files.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="ignoring-errors"><a class="header" href="#ignoring-errors">Ignoring Errors</a></h3>
<p>Normally, if a command returns a non-zero exit status, execution will stop. To
continue execution after a command, even if it fails, prefix the command with
<code>-</code>:</p>
<pre><code class="language-just">foo:
  -cat foo
  echo 'Done!'
</code></pre>
<pre><code class="language-console">$ just foo
cat foo
cat: foo: No such file or directory
echo 'Done!'
Done!
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="functions"><a class="header" href="#functions">Functions</a></h3>
<p><code>just</code> provides many built-in functions for use in expressions, including
recipe body <code>{{…}}</code> substitutions, assignments, and default parameter values.</p>
<p>All functions ending in <code>_directory</code> can be abbreviated to <code>_dir</code>. So
<code>home_directory()</code> can also be written as <code>home_dir()</code>. In addition,
<code>invocation_directory_native()</code> can be abbreviated to
<code>invocation_dir_native()</code>.</p>
<h4 id="system-information"><a class="header" href="#system-information">System Information</a></h4>
<ul>
<li><code>arch()</code> — Instruction set architecture. Possible values are: <code>"aarch64"</code>,
<code>"arm"</code>, <code>"asmjs"</code>, <code>"hexagon"</code>, <code>"mips"</code>, <code>"msp430"</code>, <code>"powerpc"</code>,
<code>"powerpc64"</code>, <code>"s390x"</code>, <code>"sparc"</code>, <code>"wasm32"</code>, <code>"x86"</code>, <code>"x86_64"</code>, and
<code>"xcore"</code>.</li>
<li><code>num_cpus()</code><sup>1.15.0</sup> - Number of logical CPUs.</li>
<li><code>os()</code> — Operating system. Possible values are: <code>"android"</code>, <code>"bitrig"</code>,
<code>"dragonfly"</code>, <code>"emscripten"</code>, <code>"freebsd"</code>, <code>"haiku"</code>, <code>"ios"</code>, <code>"linux"</code>,
<code>"macos"</code>, <code>"netbsd"</code>, <code>"openbsd"</code>, <code>"solaris"</code>, and <code>"windows"</code>.</li>
<li><code>os_family()</code> — Operating system family; possible values are: <code>"unix"</code> and
<code>"windows"</code>.</li>
</ul>
<p>For example:</p>
<pre><code class="language-just">system-info:
  @echo "This is an {{arch()}} machine".
</code></pre>
<pre><code class="language-console">$ just system-info
This is an x86_64 machine
</code></pre>
<p>The <code>os_family()</code> function can be used to create cross-platform <code>justfile</code>s
that work on various operating systems. For an example, see
<a href="https://github.com/casey/just/blob/master/examples/cross-platform.just">cross-platform.just</a>
file.</p>
<h4 id="external-commands"><a class="header" href="#external-commands">External Commands</a></h4>
<ul>
<li>
<p><code>shell(command, args...)</code><sup>1.27.0</sup> returns the standard output of shell script
<code>command</code> with zero or more positional arguments <code>args</code>. The shell used to
interpret <code>command</code> is the same shell that is used to evaluate recipe lines,
and can be changed with <code>set shell := […]</code>.</p>
<p><code>command</code> is passed as the first argument, so if the command is <code>'echo $@'</code>,
the full command line, with the default shell command <code>sh -cu</code> and <code>args</code>
<code>'foo'</code> and <code>'bar'</code> will be:</p>
<pre><code>'sh' '-cu' 'echo $@' 'echo $@' 'foo' 'bar'
</code></pre>
<p>This is so that <code>$@</code> works as expected, and <code>$1</code> refers to the first
argument. <code>$@</code> does not include the first positional argument, which is
expected to be the name of the program being run.</p>
</li>
</ul>
<pre><code class="language-just"># arguments can be variables or expressions
file := '/sys/class/power_supply/BAT0/status'
bat0stat := shell('cat $1', file)

# commands can be variables or expressions
command := 'wc -l'
output := shell(command + ' "$1"', 'main.c')

# arguments referenced by the shell command must be used
empty := shell('echo', 'foo')
full := shell('echo $1', 'foo')
error := shell('echo $1')
</code></pre>
<pre><code class="language-just"># Using python as the shell. Since `python -c` sets `sys.argv[0]` to `'-c'`,
# the first "real" positional argument will be `sys.argv[2]`.
set shell := ["python3", "-c"]
olleh := shell('import sys; print(sys.argv[2][::-1])', 'hello')
</code></pre>
<h4 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h4>
<ul>
<li><code>env(key)</code><sup>1.15.0</sup> — Retrieves the environment variable with name <code>key</code>, aborting
if it is not present.</li>
</ul>
<pre><code class="language-just">home_dir := env('HOME')

test:
  echo "{{home_dir}}"
</code></pre>
<pre><code class="language-console">$ just
/home/user1
</code></pre>
<ul>
<li><code>env(key, default)</code><sup>1.15.0</sup> — Retrieves the environment variable with
name <code>key</code>, returning <code>default</code> if it is not present.</li>
<li><code>env_var(key)</code> — Deprecated alias for <code>env(key)</code>.</li>
<li><code>env_var_or_default(key, default)</code> — Deprecated alias for <code>env(key, default)</code>.</li>
</ul>
<p>A default can be substituted for an empty environment variable value with the
<code>||</code> operator, currently unstable:</p>
<pre><code class="language-just">set unstable

foo := env('FOO') || 'DEFAULT_VALUE'
</code></pre>
<h4 id="executables"><a class="header" href="#executables">Executables</a></h4>
<ul>
<li>
<p><code>require(name)</code><sup>1.39.0</sup> — Search directories in the <code>PATH</code>
environment variable for the executable <code>name</code> and return its full path, or
halt with an error if no executable with <code>name</code> exists.</p>
<pre><code class="language-just">bash := require("bash")

@test:
    echo "bash: '{{bash}}'"
</code></pre>
<pre><code class="language-console">$ just
bash: '/bin/bash'
</code></pre>
</li>
<li>
<p><code>which(name)</code><sup>1.39.0</sup> — Search directories in the <code>PATH</code> environment
variable for the executable <code>name</code> and return its full path, or the empty
string if no executable with <code>name</code> exists. Currently unstable.</p>
<pre><code class="language-just">set unstable

bosh := which("bosh")

@test:
    echo "bosh: '{{bosh}}'"
</code></pre>
<pre><code class="language-console">$ just
bosh: ''
</code></pre>
</li>
</ul>
<h4 id="invocation-information"><a class="header" href="#invocation-information">Invocation Information</a></h4>
<ul>
<li><code>is_dependency()</code> - Returns the string <code>true</code> if the current recipe is being
run as a dependency of another recipe, rather than being run directly,
otherwise returns the string <code>false</code>.</li>
</ul>
<h4 id="invocation-directory"><a class="header" href="#invocation-directory">Invocation Directory</a></h4>
<ul>
<li><code>invocation_directory()</code> - Retrieves the absolute path to the current
directory when <code>just</code> was invoked, before  <code>just</code> changed it (chdir’d) prior
to executing commands. On Windows, <code>invocation_directory()</code> uses <code>cygpath</code> to
convert the invocation directory to a Cygwin-compatible <code>/</code>-separated path.
Use <code>invocation_directory_native()</code> to return the verbatim invocation
directory on all platforms.</li>
</ul>
<p>For example, to call <code>rustfmt</code> on files just under the “current directory”
(from the user/invoker’s perspective), use the following rule:</p>
<pre><code class="language-just">rustfmt:
  find {{invocation_directory()}} -name \*.rs -exec rustfmt {} \;
</code></pre>
<p>Alternatively, if your command needs to be run from the current directory, you
could use (e.g.):</p>
<pre><code class="language-just">build:
  cd {{invocation_directory()}}; ./some_script_that_needs_to_be_run_from_here
</code></pre>
<ul>
<li><code>invocation_directory_native()</code> - Retrieves the absolute path to the current
directory when <code>just</code> was invoked, before  <code>just</code> changed it (chdir’d) prior
to executing commands.</li>
</ul>
<h4 id="justfile-and-justfile-directory"><a class="header" href="#justfile-and-justfile-directory">Justfile and Justfile Directory</a></h4>
<ul>
<li>
<p><code>justfile()</code> - Retrieves the path of the current <code>justfile</code>.</p>
</li>
<li>
<p><code>justfile_directory()</code> - Retrieves the path of the parent directory of the
current <code>justfile</code>.</p>
</li>
</ul>
<p>For example, to run a command relative to the location of the current
<code>justfile</code>:</p>
<pre><code class="language-just">script:
  {{justfile_directory()}}/scripts/some_script
</code></pre>
<h4 id="source-and-source-directory"><a class="header" href="#source-and-source-directory">Source and Source Directory</a></h4>
<ul>
<li>
<p><code>source_file()</code><sup>1.27.0</sup> - Retrieves the path of the current source file.</p>
</li>
<li>
<p><code>source_directory()</code><sup>1.27.0</sup> - Retrieves the path of the parent directory of the
current source file.</p>
</li>
</ul>
<p><code>source_file()</code> and <code>source_directory()</code> behave the same as <code>justfile()</code> and
<code>justfile_directory()</code> in the root <code>justfile</code>, but will return the path and
directory, respectively, of the current <code>import</code> or <code>mod</code> source file when
called from within an import or submodule.</p>
<h4 id="just-executable"><a class="header" href="#just-executable">Just Executable</a></h4>
<ul>
<li><code>just_executable()</code> - Absolute path to the <code>just</code> executable.</li>
</ul>
<p>For example:</p>
<pre><code class="language-just">executable:
  @echo The executable is at: {{just_executable()}}
</code></pre>
<pre><code class="language-console">$ just
The executable is at: /bin/just
</code></pre>
<h4 id="just-process-id"><a class="header" href="#just-process-id">Just Process ID</a></h4>
<ul>
<li><code>just_pid()</code> - Process ID of the <code>just</code> executable.</li>
</ul>
<p>For example:</p>
<pre><code class="language-just">pid:
  @echo The process ID is: {{ just_pid() }}
</code></pre>
<pre><code class="language-console">$ just
The process ID is: 420
</code></pre>
<h4 id="string-manipulation"><a class="header" href="#string-manipulation">String Manipulation</a></h4>
<ul>
<li><code>append(suffix, s)</code><sup>1.27.0</sup> Append <code>suffix</code> to whitespace-separated
strings in <code>s</code>. <code>append('/src', 'foo bar baz')</code> → <code>'foo/src bar/src baz/src'</code></li>
<li><code>prepend(prefix, s)</code><sup>1.27.0</sup> Prepend <code>prefix</code> to
whitespace-separated strings in <code>s</code>. <code>prepend('src/', 'foo bar baz')</code> →
<code>'src/foo src/bar src/baz'</code></li>
<li><code>encode_uri_component(s)</code><sup>1.27.0</sup> - Percent-encode characters in <code>s</code>
except <code>[A-Za-z0-9_.!~*'()-]</code>, matching the behavior of the
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent">JavaScript <code>encodeURIComponent</code> function</a>.</li>
<li><code>quote(s)</code> - Replace all single quotes with <code>'\''</code> and prepend and append
single quotes to <code>s</code>. This is sufficient to escape special characters for
many shells, including most Bourne shell descendants.</li>
<li><code>replace(s, from, to)</code> - Replace all occurrences of <code>from</code> in <code>s</code> to <code>to</code>.</li>
<li><code>replace_regex(s, regex, replacement)</code> - Replace all occurrences of <code>regex</code>
in <code>s</code> to <code>replacement</code>. Regular expressions are provided by the
<a href="https://docs.rs/regex/latest/regex/">Rust <code>regex</code> crate</a>. See the
<a href="https://docs.rs/regex/latest/regex/#syntax">syntax documentation</a> for usage
examples. Capture groups are supported. The <code>replacement</code> string uses
<a href="https://docs.rs/regex/latest/regex/struct.Regex.html#replacement-string-syntax">Replacement string syntax</a>.</li>
<li><code>trim(s)</code> - Remove leading and trailing whitespace from <code>s</code>.</li>
<li><code>trim_end(s)</code> - Remove trailing whitespace from <code>s</code>.</li>
<li><code>trim_end_match(s, substring)</code> - Remove suffix of <code>s</code> matching <code>substring</code>.</li>
<li><code>trim_end_matches(s, substring)</code> - Repeatedly remove suffixes of <code>s</code> matching
<code>substring</code>.</li>
<li><code>trim_start(s)</code> - Remove leading whitespace from <code>s</code>.</li>
<li><code>trim_start_match(s, substring)</code> - Remove prefix of <code>s</code> matching <code>substring</code>.</li>
<li><code>trim_start_matches(s, substring)</code> - Repeatedly remove prefixes of <code>s</code>
matching <code>substring</code>.</li>
</ul>
<h4 id="case-conversion"><a class="header" href="#case-conversion">Case Conversion</a></h4>
<ul>
<li><code>capitalize(s)</code><sup>1.7.0</sup> - Convert first character of <code>s</code> to uppercase
and the rest to lowercase.</li>
<li><code>kebabcase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>kebab-case</code>.</li>
<li><code>lowercamelcase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>lowerCamelCase</code>.</li>
<li><code>lowercase(s)</code> - Convert <code>s</code> to lowercase.</li>
<li><code>shoutykebabcase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>SHOUTY-KEBAB-CASE</code>.</li>
<li><code>shoutysnakecase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>SHOUTY_SNAKE_CASE</code>.</li>
<li><code>snakecase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>snake_case</code>.</li>
<li><code>titlecase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>Title Case</code>.</li>
<li><code>uppercamelcase(s)</code><sup>1.7.0</sup> - Convert <code>s</code> to <code>UpperCamelCase</code>.</li>
<li><code>uppercase(s)</code> - Convert <code>s</code> to uppercase.</li>
</ul>
<h4 id="path-manipulation"><a class="header" href="#path-manipulation">Path Manipulation</a></h4>
<h5 id="fallible"><a class="header" href="#fallible">Fallible</a></h5>
<ul>
<li><code>absolute_path(path)</code> - Absolute path to relative <code>path</code> in the working
directory. <code>absolute_path("./bar.txt")</code> in directory <code>/foo</code> is
<code>/foo/bar.txt</code>.</li>
<li><code>canonicalize(path)</code><sup>1.24.0</sup> - Canonicalize <code>path</code> by resolving symlinks and removing
<code>.</code>, <code>..</code>, and extra <code>/</code>s where possible.</li>
<li><code>extension(path)</code> - Extension of <code>path</code>. <code>extension("/foo/bar.txt")</code> is
<code>txt</code>.</li>
<li><code>file_name(path)</code> - File name of <code>path</code> with any leading directory components
removed. <code>file_name("/foo/bar.txt")</code> is <code>bar.txt</code>.</li>
<li><code>file_stem(path)</code> - File name of <code>path</code> without extension.
<code>file_stem("/foo/bar.txt")</code> is <code>bar</code>.</li>
<li><code>parent_directory(path)</code> - Parent directory of <code>path</code>.
<code>parent_directory("/foo/bar.txt")</code> is <code>/foo</code>.</li>
<li><code>without_extension(path)</code> - <code>path</code> without extension.
<code>without_extension("/foo/bar.txt")</code> is <code>/foo/bar</code>.</li>
</ul>
<p>These functions can fail, for example if a path does not have an extension,
which will halt execution.</p>
<h5 id="infallible"><a class="header" href="#infallible">Infallible</a></h5>
<ul>
<li><code>clean(path)</code> - Simplify <code>path</code> by removing extra path separators,
intermediate <code>.</code> components, and <code>..</code> where possible. <code>clean("foo//bar")</code> is
<code>foo/bar</code>, <code>clean("foo/..")</code> is <code>.</code>, <code>clean("foo/./bar")</code> is <code>foo/bar</code>.</li>
<li><code>join(a, b…)</code> - <em>This function uses <code>/</code> on Unix and <code>\</code> on Windows, which can
be lead to unwanted behavior. The <code>/</code> operator, e.g., <code>a / b</code>, which always
uses <code>/</code>, should be considered as a replacement unless <code>\</code>s are specifically
desired on Windows.</em> Join path <code>a</code> with path <code>b</code>. <code>join("foo/bar", "baz")</code> is
<code>foo/bar/baz</code>. Accepts two or more arguments.</li>
</ul>
<h4 id="filesystem-access"><a class="header" href="#filesystem-access">Filesystem Access</a></h4>
<ul>
<li><code>path_exists(path)</code> - Returns <code>true</code> if the path points at an existing entity
and <code>false</code> otherwise. Traverses symbolic links, and returns <code>false</code> if the
path is inaccessible or points to a broken symlink.</li>
<li><code>read(path)</code><sup>1.39.0</sup> - Returns the content of file at <code>path</code> as
string.</li>
</ul>
<h5 id="error-reporting"><a class="header" href="#error-reporting">Error Reporting</a></h5>
<ul>
<li><code>error(message)</code> - Abort execution and report error <code>message</code> to user.</li>
</ul>
<h4 id="uuid-and-hash-generation"><a class="header" href="#uuid-and-hash-generation">UUID and Hash Generation</a></h4>
<ul>
<li><code>blake3(string)</code><sup>1.25.0</sup> - Return <a href="https://github.com/BLAKE3-team/BLAKE3/">BLAKE3</a> hash of <code>string</code> as hexadecimal string.</li>
<li><code>blake3_file(path)</code><sup>1.25.0</sup> - Return <a href="https://github.com/BLAKE3-team/BLAKE3/">BLAKE3</a> hash of file at <code>path</code> as hexadecimal
string.</li>
<li><code>sha256(string)</code> - Return the SHA-256 hash of <code>string</code> as hexadecimal string.</li>
<li><code>sha256_file(path)</code> - Return SHA-256 hash of file at <code>path</code> as hexadecimal
string.</li>
<li><code>uuid()</code> - Generate a random version 4 UUID.</li>
</ul>
<h4 id="random"><a class="header" href="#random">Random</a></h4>
<ul>
<li><code>choose(n, alphabet)</code><sup>1.27.0</sup> - Generate a string of <code>n</code> randomly
selected characters from <code>alphabet</code>, which may not contain repeated
characters. For example, <code>choose('64', HEX)</code> will generate a random
64-character lowercase hex string.</li>
</ul>
<h4 id="datetime"><a class="header" href="#datetime">Datetime</a></h4>
<ul>
<li><code>datetime(format)</code><sup>1.30.0</sup> - Return local time with <code>format</code>.</li>
<li><code>datetime_utc(format)</code><sup>1.30.0</sup> - Return UTC time with <code>format</code>.</li>
</ul>
<p>The arguments to <code>datetime</code> and <code>datetime_utc</code> are <code>strftime</code>-style format
strings, see the
<a href="https://docs.rs/chrono/latest/chrono/format/strftime/index.html"><code>chrono</code> library docs</a>
for details.</p>
<h4 id="semantic-versions"><a class="header" href="#semantic-versions">Semantic Versions</a></h4>
<ul>
<li><code>semver_matches(version, requirement)</code><sup>1.16.0</sup> - Check whether a
<a href="https://semver.org">semantic <code>version</code></a>, e.g., <code>"0.1.0"</code> matches a
<code>requirement</code>, e.g., <code>"&gt;=0.1.0"</code>, returning <code>"true"</code> if so and <code>"false"</code>
otherwise.</li>
</ul>
<h4 id="style"><a class="header" href="#style">Style</a></h4>
<ul>
<li>
<p><code>style(name)</code><sup>1.37.0</sup> - Return a named terminal display attribute
escape sequence used by <code>just</code>. Unlike terminal display attribute escape
sequence constants, which contain standard colors and styles, <code>style(name)</code>
returns an escape sequence used by <code>just</code> itself, and can be used to make
recipe output match <code>just</code>’s own output.</p>
<p>Recognized values for <code>name</code> are <code>'command'</code>, for echoed recipe lines,
<code>error</code>, and <code>warning</code>.</p>
<p>For example, to style an error message:</p>
<pre><code class="language-just">scary:
  @echo '{{ style("error") }}OH NO{{ NORMAL }}'
</code></pre>
</li>
</ul>
<h5 id="user-directories1230"><a class="header" href="#user-directories1230">User Directories<sup>1.23.0</sup></a></h5>
<p>These functions return paths to user-specific directories for things like
configuration, data, caches, executables, and the user’s home directory.</p>
<p>On Unix, these functions follow the
<a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a>.</p>
<p>On MacOS and Windows, these functions return the system-specified user-specific
directories. For example, <code>cache_directory()</code> returns <code>~/Library/Caches</code> on
MacOS and <code>{FOLDERID_LocalAppData}</code> on Windows.</p>
<p>See the <a href="https://docs.rs/dirs/latest/dirs/index.html"><code>dirs</code></a> crate for more
details.</p>
<ul>
<li><code>cache_directory()</code> - The user-specific cache directory.</li>
<li><code>config_directory()</code> - The user-specific configuration directory.</li>
<li><code>config_local_directory()</code> - The local user-specific configuration directory.</li>
<li><code>data_directory()</code> - The user-specific data directory.</li>
<li><code>data_local_directory()</code> - The local user-specific data directory.</li>
<li><code>executable_directory()</code> - The user-specific executable directory.</li>
<li><code>home_directory()</code> - The user’s home directory.</li>
</ul>
<p>If you would like to use XDG base directories on all platforms you can use the
<code>env(…)</code> function with the appropriate environment variable and fallback,
although note that the XDG specification requires ignoring non-absolute paths,
so for full compatibility with spec-compliant applications, you would need to
do:</p>
<pre><code class="language-just">xdg_config_dir := if env('XDG_CONFIG_HOME', '') =~ '^/' {
  env('XDG_CONFIG_HOME')
} else {
  home_directory() / '.config'
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="constants"><a class="header" href="#constants">Constants</a></h3>
<p>A number of constants are predefined:</p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Value</th><th>Value on Windows</th></tr></thead><tbody>
<tr><td><code>HEX</code><sup>1.27.0</sup></td><td><code>"0123456789abcdef"</code></td><td></td></tr>
<tr><td><code>HEXLOWER</code><sup>1.27.0</sup></td><td><code>"0123456789abcdef"</code></td><td></td></tr>
<tr><td><code>HEXUPPER</code><sup>1.27.0</sup></td><td><code>"0123456789ABCDEF"</code></td><td></td></tr>
<tr><td><code>PATH_SEP</code><sup>1.41.0</sup></td><td><code>"/"</code></td><td>“"</td></tr>
<tr><td><code>PATH_VAR_SEP</code><sup>1.41.0</sup></td><td><code>":"</code></td><td>“;”</td></tr>
<tr><td><code>CLEAR</code><sup>1.37.0</sup></td><td><code>"\ec"</code></td><td></td></tr>
<tr><td><code>NORMAL</code><sup>1.37.0</sup></td><td><code>"\e[0m"</code></td><td></td></tr>
<tr><td><code>BOLD</code><sup>1.37.0</sup></td><td><code>"\e[1m"</code></td><td></td></tr>
<tr><td><code>ITALIC</code><sup>1.37.0</sup></td><td><code>"\e[3m"</code></td><td></td></tr>
<tr><td><code>UNDERLINE</code><sup>1.37.0</sup></td><td><code>"\e[4m"</code></td><td></td></tr>
<tr><td><code>INVERT</code><sup>1.37.0</sup></td><td><code>"\e[7m"</code></td><td></td></tr>
<tr><td><code>HIDE</code><sup>1.37.0</sup></td><td><code>"\e[8m"</code></td><td></td></tr>
<tr><td><code>STRIKETHROUGH</code><sup>1.37.0</sup></td><td><code>"\e[9m"</code></td><td></td></tr>
<tr><td><code>BLACK</code><sup>1.37.0</sup></td><td><code>"\e[30m"</code></td><td></td></tr>
<tr><td><code>RED</code><sup>1.37.0</sup></td><td><code>"\e[31m"</code></td><td></td></tr>
<tr><td><code>GREEN</code><sup>1.37.0</sup></td><td><code>"\e[32m"</code></td><td></td></tr>
<tr><td><code>YELLOW</code><sup>1.37.0</sup></td><td><code>"\e[33m"</code></td><td></td></tr>
<tr><td><code>BLUE</code><sup>1.37.0</sup></td><td><code>"\e[34m"</code></td><td></td></tr>
<tr><td><code>MAGENTA</code><sup>1.37.0</sup></td><td><code>"\e[35m"</code></td><td></td></tr>
<tr><td><code>CYAN</code><sup>1.37.0</sup></td><td><code>"\e[36m"</code></td><td></td></tr>
<tr><td><code>WHITE</code><sup>1.37.0</sup></td><td><code>"\e[37m"</code></td><td></td></tr>
<tr><td><code>BG_BLACK</code><sup>1.37.0</sup></td><td><code>"\e[40m"</code></td><td></td></tr>
<tr><td><code>BG_RED</code><sup>1.37.0</sup></td><td><code>"\e[41m"</code></td><td></td></tr>
<tr><td><code>BG_GREEN</code><sup>1.37.0</sup></td><td><code>"\e[42m"</code></td><td></td></tr>
<tr><td><code>BG_YELLOW</code><sup>1.37.0</sup></td><td><code>"\e[43m"</code></td><td></td></tr>
<tr><td><code>BG_BLUE</code><sup>1.37.0</sup></td><td><code>"\e[44m"</code></td><td></td></tr>
<tr><td><code>BG_MAGENTA</code><sup>1.37.0</sup></td><td><code>"\e[45m"</code></td><td></td></tr>
<tr><td><code>BG_CYAN</code><sup>1.37.0</sup></td><td><code>"\e[46m"</code></td><td></td></tr>
<tr><td><code>BG_WHITE</code><sup>1.37.0</sup></td><td><code>"\e[47m"</code></td><td></td></tr>
</tbody></table>
</div>
<pre><code class="language-just">@foo:
  echo {{HEX}}
</code></pre>
<pre><code class="language-console">$ just foo
0123456789abcdef
</code></pre>
<p>Constants starting with <code>\e</code> are
<a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape sequences</a>.</p>
<p><code>CLEAR</code> clears the screen, similar to the <code>clear</code> command. The rest are of the
form <code>\e[Nm</code>, where <code>N</code> is an integer, and set terminal display attributes.</p>
<p>Terminal display attribute escape sequences can be combined, for example text
weight <code>BOLD</code>, text style <code>STRIKETHROUGH</code>, foreground color <code>CYAN</code>, and
background color <code>BG_BLUE</code>. They should be followed by <code>NORMAL</code>, to reset the
terminal back to normal.</p>
<p>Escape sequences should be quoted, since <code>[</code> is treated as a special character
by some shells.</p>
<pre><code class="language-just">@foo:
  echo '{{BOLD + STRIKETHROUGH + CYAN + BG_BLUE}}Hi!{{NORMAL}}'
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="attributes"><a class="header" href="#attributes">Attributes</a></h3>
<p>Recipes, <code>mod</code> statements, and aliases may be annotated with attributes that
change their behavior.</p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>[confirm]</code><sup>1.17.0</sup></td><td>recipe</td><td>Require confirmation prior to executing recipe.</td></tr>
<tr><td><code>[confirm(PROMPT)]</code><sup>1.23.0</sup></td><td>recipe</td><td>Require confirmation prior to executing recipe with a custom prompt.</td></tr>
<tr><td><code>[doc(DOC)]</code><sup>1.27.0</sup></td><td>module, recipe</td><td>Set recipe or module’s <a href="documentation-comments.html">documentation comment</a> to <code>DOC</code>.</td></tr>
<tr><td><code>[extension(EXT)]</code><sup>1.32.0</sup></td><td>recipe</td><td>Set shebang recipe script’s file extension to <code>EXT</code>. <code>EXT</code> should include a period if one is desired.</td></tr>
<tr><td><code>[group(NAME)]</code><sup>1.27.0</sup></td><td>module, recipe</td><td>Put recipe or module in in <a href="groups.html">group</a> <code>NAME</code>.</td></tr>
<tr><td><code>[linux]</code><sup>1.8.0</sup></td><td>recipe</td><td>Enable recipe on Linux.</td></tr>
<tr><td><code>[macos]</code><sup>1.8.0</sup></td><td>recipe</td><td>Enable recipe on MacOS.</td></tr>
<tr><td><code>[metadata(METADATA)]</code><sup>1.42.0</sup></td><td>recipe</td><td>Attach <code>METADATA</code> to recipe.</td></tr>
<tr><td><code>[no-cd]</code><sup>1.9.0</sup></td><td>recipe</td><td>Don’t change directory before executing recipe.</td></tr>
<tr><td><code>[no-exit-message]</code><sup>1.7.0</sup></td><td>recipe</td><td>Don’t print an error message if recipe fails.</td></tr>
<tr><td><code>[no-quiet]</code><sup>1.23.0</sup></td><td>recipe</td><td>Override globally quiet recipes and always echo out the recipe.</td></tr>
<tr><td><code>[openbsd]</code><sup>1.38.0</sup></td><td>recipe</td><td>Enable recipe on OpenBSD.</td></tr>
<tr><td><code>[parallel]</code><sup>1.42.0</sup></td><td>recipe</td><td>Run this recipe’s dependencies in parallel.</td></tr>
<tr><td><code>[positional-arguments]</code><sup>1.29.0</sup></td><td>recipe</td><td>Turn on <a href="avoiding-argument-splitting.html#positional-arguments">positional arguments</a> for this recipe.</td></tr>
<tr><td><code>[private]</code><sup>1.10.0</sup></td><td>alias, recipe</td><td>Make recipe, alias, or variable private. See <a href="private-recipes.html">Private Recipes</a>.</td></tr>
<tr><td><code>[script]</code><sup>1.33.0</sup></td><td>recipe</td><td>Execute recipe as script. See <a href="script-recipes.html">script recipes</a> for more details.</td></tr>
<tr><td><code>[script(COMMAND)]</code><sup>1.32.0</sup></td><td>recipe</td><td>Execute recipe as a script interpreted by <code>COMMAND</code>. See <a href="script-recipes.html">script recipes</a> for more details.</td></tr>
<tr><td><code>[unix]</code><sup>1.8.0</sup></td><td>recipe</td><td>Enable recipe on Unixes. (Includes MacOS).</td></tr>
<tr><td><code>[windows]</code><sup>1.8.0</sup></td><td>recipe</td><td>Enable recipe on Windows.</td></tr>
<tr><td><code>[working-directory(PATH)]</code><sup>1.38.0</sup></td><td>recipe</td><td>Set recipe working directory. <code>PATH</code> may be relative or absolute. If relative, it is interpreted relative to the default working directory.</td></tr>
</tbody></table>
</div>
<p>A recipe can have multiple attributes, either on multiple lines:</p>
<pre><code class="language-just">[no-cd]
[private]
foo:
    echo "foo"
</code></pre>
<p>Or separated by commas on a single line<sup>1.14.0</sup>:</p>
<pre><code class="language-just">[no-cd, private]
foo:
    echo "foo"
</code></pre>
<p>Attributes with a single argument may be written with a colon:</p>
<pre><code class="language-just">[group: 'bar']
foo:
</code></pre>
<h4 id="enabling-and-disabling-recipes180"><a class="header" href="#enabling-and-disabling-recipes180">Enabling and Disabling Recipes<sup>1.8.0</sup></a></h4>
<p>The <code>[linux]</code>, <code>[macos]</code>, <code>[unix]</code>, and <code>[windows]</code> attributes are
configuration attributes. By default, recipes are always enabled. A recipe with
one or more configuration attributes will only be enabled when one or more of
those configurations is active.</p>
<p>This can be used to write <code>justfile</code>s that behave differently depending on
which operating system they run on. The <code>run</code> recipe in this <code>justfile</code> will
compile and run <code>main.c</code>, using a different C compiler and using the correct
output binary name for that compiler depending on the operating system:</p>
<pre><code class="language-just">[unix]
run:
  cc main.c
  ./a.out

[windows]
run:
  cl main.c
  main.exe
</code></pre>
<h4 id="disabling-changing-directory190"><a class="header" href="#disabling-changing-directory190">Disabling Changing Directory<sup>1.9.0</sup></a></h4>
<p><code>just</code> normally executes recipes with the current directory set to the
directory that contains the <code>justfile</code>. This can be disabled using the
<code>[no-cd]</code> attribute. This can be used to create recipes which use paths
relative to the invocation directory, or which operate on the current
directory.</p>
<p>For example, this <code>commit</code> recipe:</p>
<pre><code class="language-just">[no-cd]
commit file:
  git add {{file}}
  git commit
</code></pre>
<p>Can be used with paths that are relative to the current directory, because
<code>[no-cd]</code> prevents <code>just</code> from changing the current directory when executing
<code>commit</code>.</p>
<h4 id="requiring-confirmation-for-recipes1170"><a class="header" href="#requiring-confirmation-for-recipes1170">Requiring Confirmation for Recipes<sup>1.17.0</sup></a></h4>
<p><code>just</code> normally executes all recipes unless there is an error. The <code>[confirm]</code>
attribute allows recipes require confirmation in the terminal prior to running.
This can be overridden by passing <code>--yes</code> to <code>just</code>, which will automatically
confirm any recipes marked by this attribute.</p>
<p>Recipes dependent on a recipe that requires confirmation will not be run if the
relied upon recipe is not confirmed, as well as recipes passed after any recipe
that requires confirmation.</p>
<pre><code class="language-just">[confirm]
delete-all:
  rm -rf *
</code></pre>
<h4 id="custom-confirmation-prompt1230"><a class="header" href="#custom-confirmation-prompt1230">Custom Confirmation Prompt<sup>1.23.0</sup></a></h4>
<p>The default confirmation prompt can be overridden with <code>[confirm(PROMPT)]</code>:</p>
<pre><code class="language-just">[confirm("Are you sure you want to delete everything?")]
delete-everything:
  rm -rf *
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="groups"><a class="header" href="#groups">Groups</a></h3>
<p>Recipes and modules may be annotated with one or more group names:</p>
<pre><code class="language-just">[group('lint')]
js-lint:
    echo 'Running JS linter…'

[group('rust recipes')]
[group('lint')]
rust-lint:
    echo 'Running Rust linter…'

[group('lint')]
cpp-lint:
  echo 'Running C++ linter…'

# not in any group
email-everyone:
    echo 'Sending mass email…'
</code></pre>
<p>Recipes are listed by group:</p>
<pre><code>$ just --list
Available recipes:
    email-everyone # not in any group

    [lint]
    cpp-lint
    js-lint
    rust-lint

    [rust recipes]
    rust-lint
</code></pre>
<p><code>just --list --unsorted</code> prints recipes in their justfile order within each group:</p>
<pre><code>$ just --list --unsorted
Available recipes:
    (no group)
    email-everyone # not in any group

    [lint]
    js-lint
    rust-lint
    cpp-lint

    [rust recipes]
    rust-lint
</code></pre>
<p>Groups can be listed with <code>--groups</code>:</p>
<pre><code>$ just --groups
Recipe groups:
  lint
  rust recipes
</code></pre>
<p>Use <code>just --groups --unsorted</code> to print groups in their justfile order.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="command-evaluation-using-backticks"><a class="header" href="#command-evaluation-using-backticks">Command Evaluation Using Backticks</a></h3>
<p>Backticks can be used to store the result of commands:</p>
<pre><code class="language-just">localhost := `dumpinterfaces | cut -d: -f2 | sed 's/\/.*//' | sed 's/ //g'`

serve:
  ./serve {{localhost}} 8080
</code></pre>
<p>Indented backticks, delimited by three backticks, are de-indented in the same
manner as indented strings:</p>
<pre><code class="language-just"># This backtick evaluates the command `echo foo\necho bar\n`, which produces the value `foo\nbar\n`.
stuff := ```
    echo foo
    echo bar
  ```
</code></pre>
<p>See the <a href="strings.html">Strings</a> section for details on unindenting.</p>
<p>Backticks may not start with <code>#!</code>. This syntax is reserved for a future
upgrade.</p>
<p>The <a href="functions.html#external-commands"><code>shell(…)</code> function</a> provides a more general mechanism
to invoke external commands, including the ability to execute the contents of a
variable as a command, and to pass arguments to a command.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="conditional-expressions"><a class="header" href="#conditional-expressions">Conditional Expressions</a></h3>
<p><code>if</code>/<code>else</code> expressions evaluate different branches depending on if two
expressions evaluate to the same value:</p>
<pre><code class="language-just">foo := if "2" == "2" { "Good!" } else { "1984" }

bar:
  @echo "{{foo}}"
</code></pre>
<pre><code class="language-console">$ just bar
Good!
</code></pre>
<p>It is also possible to test for inequality:</p>
<pre><code class="language-just">foo := if "hello" != "goodbye" { "xyz" } else { "abc" }

bar:
  @echo {{foo}}
</code></pre>
<pre><code class="language-console">$ just bar
xyz
</code></pre>
<p>And match against regular expressions:</p>
<pre><code class="language-just">foo := if "hello" =~ 'hel+o' { "match" } else { "mismatch" }

bar:
  @echo {{foo}}
</code></pre>
<pre><code class="language-console">$ just bar
match
</code></pre>
<p>Regular expressions are provided by the
<a href="https://github.com/rust-lang/regex">regex crate</a>, whose syntax is documented on
<a href="https://docs.rs/regex/1.5.4/regex/#syntax">docs.rs</a>. Since regular expressions
commonly use backslash escape sequences, consider using single-quoted string
literals, which will pass slashes to the regex parser unmolested.</p>
<p>Conditional expressions short-circuit, which means they only evaluate one of
their branches. This can be used to make sure that backtick expressions don’t
run when they shouldn’t.</p>
<pre><code class="language-just">foo := if env_var("RELEASE") == "true" { `get-something-from-release-database` } else { "dummy-value" }
</code></pre>
<p>Conditionals can be used inside of recipes:</p>
<pre><code class="language-just">bar foo:
  echo {{ if foo == "bar" { "hello" } else { "goodbye" } }}
</code></pre>
<p>Note the space after the final <code>}</code>! Without the space, the interpolation will
be prematurely closed.</p>
<p>Multiple conditionals can be chained:</p>
<pre><code class="language-just">foo := if "hello" == "goodbye" {
  "xyz"
} else if "a" == "a" {
  "abc"
} else {
  "123"
}

bar:
  @echo {{foo}}
</code></pre>
<pre><code class="language-console">$ just bar
abc
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="stopping-execution-with-error"><a class="header" href="#stopping-execution-with-error">Stopping execution with error</a></h3>
<p>Execution can be halted with the <code>error</code> function. For example:</p>
<pre><code class="language-just">foo := if "hello" == "goodbye" {
  "xyz"
} else if "a" == "b" {
  "abc"
} else {
  error("123")
}
</code></pre>
<p>Which produce the following error when run:</p>
<pre><code>error: Call to function `error` failed: 123
   |
16 |   error("123")
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="setting-variables-from-the-command-line"><a class="header" href="#setting-variables-from-the-command-line">Setting Variables from the Command Line</a></h3>
<p>Variables can be overridden from the command line.</p>
<pre><code class="language-just">os := "linux"

test: build
  ./test --test {{os}}

build:
  ./build {{os}}
</code></pre>
<pre><code class="language-console">$ just
./build linux
./test --test linux
</code></pre>
<p>Any number of arguments of the form <code>NAME=VALUE</code> can be passed before recipes:</p>
<pre><code class="language-console">$ just os=plan9
./build plan9
./test --test plan9
</code></pre>
<p>Or you can use the <code>--set</code> flag:</p>
<pre><code class="language-console">$ just --set os bsd
./build bsd
./test --test bsd
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="getting-and-setting-environment-variables"><a class="header" href="#getting-and-setting-environment-variables">Getting and Setting Environment Variables</a></h3>
<h4 id="exporting-just-variables"><a class="header" href="#exporting-just-variables">Exporting <code>just</code> Variables</a></h4>
<p>Assignments prefixed with the <code>export</code> keyword will be exported to recipes as
environment variables:</p>
<pre><code class="language-just">export RUST_BACKTRACE := "1"

test:
  # will print a stack trace if it crashes
  cargo test
</code></pre>
<p>Parameters prefixed with a <code>$</code> will be exported as environment variables:</p>
<pre><code class="language-just">test $RUST_BACKTRACE="1":
  # will print a stack trace if it crashes
  cargo test
</code></pre>
<p>Exported variables and parameters are not exported to backticks in the same scope.</p>
<pre><code class="language-just">export WORLD := "world"
# This backtick will fail with "WORLD: unbound variable"
BAR := `echo hello $WORLD`
</code></pre>
<pre><code class="language-just"># Running `just a foo` will fail with "A: unbound variable"
a $A $B=`echo $A`:
  echo $A $B
</code></pre>
<p>When <a href="settings.html#export">export</a> is set, all <code>just</code> variables are exported as environment
variables.</p>
<h4 id="unexporting-environment-variables1290"><a class="header" href="#unexporting-environment-variables1290">Unexporting Environment Variables<sup>1.29.0</sup></a></h4>
<p>Environment variables can be unexported with the <code>unexport keyword</code>:</p>
<pre><code class="language-just">unexport FOO

@foo:
  echo $FOO
</code></pre>
<pre><code>$ export FOO=bar
$ just foo
sh: FOO: unbound variable
</code></pre>
<h4 id="getting-environment-variables-from-the-environment"><a class="header" href="#getting-environment-variables-from-the-environment">Getting Environment Variables from the environment</a></h4>
<p>Environment variables from the environment are passed automatically to the
recipes.</p>
<pre><code class="language-just">print_home_folder:
  echo "HOME is: '${HOME}'"
</code></pre>
<pre><code class="language-console">$ just
HOME is '/home/myuser'
</code></pre>
<h4 id="setting-just-variables-from-environment-variables"><a class="header" href="#setting-just-variables-from-environment-variables">Setting <code>just</code> Variables from Environment Variables</a></h4>
<p>Environment variables can be propagated to <code>just</code> variables using the <code>env()</code> function.
See
<a href="functions.html#environment-variables">environment-variables</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="recipe-parameters"><a class="header" href="#recipe-parameters">Recipe Parameters</a></h3>
<p>Recipes may have parameters. Here recipe <code>build</code> has a parameter called
<code>target</code>:</p>
<pre><code class="language-just">build target:
  @echo 'Building {{target}}…'
  cd {{target}} &amp;&amp; make
</code></pre>
<p>To pass arguments on the command line, put them after the recipe name:</p>
<pre><code class="language-console">$ just build my-awesome-project
Building my-awesome-project…
cd my-awesome-project &amp;&amp; make
</code></pre>
<p>To pass arguments to a dependency, put the dependency in parentheses along with
the arguments:</p>
<pre><code class="language-just">default: (build "main")

build target:
  @echo 'Building {{target}}…'
  cd {{target}} &amp;&amp; make
</code></pre>
<p>Variables can also be passed as arguments to dependencies:</p>
<pre><code class="language-just">target := "main"

_build version:
  @echo 'Building {{version}}…'
  cd {{version}} &amp;&amp; make

build: (_build target)
</code></pre>
<p>A command’s arguments can be passed to dependency by putting the dependency in
parentheses along with the arguments:</p>
<pre><code class="language-just">build target:
  @echo "Building {{target}}…"

push target: (build target)
  @echo 'Pushing {{target}}…'
</code></pre>
<p>Parameters may have default values:</p>
<pre><code class="language-just">default := 'all'

test target tests=default:
  @echo 'Testing {{target}}:{{tests}}…'
  ./test --tests {{tests}} {{target}}
</code></pre>
<p>Parameters with default values may be omitted:</p>
<pre><code class="language-console">$ just test server
Testing server:all…
./test --tests all server
</code></pre>
<p>Or supplied:</p>
<pre><code class="language-console">$ just test server unit
Testing server:unit…
./test --tests unit server
</code></pre>
<p>Default values may be arbitrary expressions, but expressions containing the
<code>+</code>, <code>&amp;&amp;</code>, <code>||</code>, or <code>/</code> operators must be parenthesized:</p>
<pre><code class="language-just">arch := "wasm"

test triple=(arch + "-unknown-unknown") input=(arch / "input.dat"):
  ./test {{triple}}
</code></pre>
<p>The last parameter of a recipe may be variadic, indicated with either a <code>+</code> or
a <code>*</code> before the argument name:</p>
<pre><code class="language-just">backup +FILES:
  scp {{FILES}} me@server.com:
</code></pre>
<p>Variadic parameters prefixed with <code>+</code> accept <em>one or more</em> arguments and expand
to a string containing those arguments separated by spaces:</p>
<pre><code class="language-console">$ just backup FAQ.md GRAMMAR.md
scp FAQ.md GRAMMAR.md me@server.com:
FAQ.md                  100% 1831     1.8KB/s   00:00
GRAMMAR.md              100% 1666     1.6KB/s   00:00
</code></pre>
<p>Variadic parameters prefixed with <code>*</code> accept <em>zero or more</em> arguments and
expand to a string containing those arguments separated by spaces, or an empty
string if no arguments are present:</p>
<pre><code class="language-just">commit MESSAGE *FLAGS:
  git commit {{FLAGS}} -m "{{MESSAGE}}"
</code></pre>
<p>Variadic parameters can be assigned default values. These are overridden by
arguments passed on the command line:</p>
<pre><code class="language-just">test +FLAGS='-q':
  cargo test {{FLAGS}}
</code></pre>
<p><code>{{…}}</code> substitutions may need to be quoted if they contain spaces. For
example, if you have the following recipe:</p>
<pre><code class="language-just">search QUERY:
  lynx https://www.google.com/?q={{QUERY}}
</code></pre>
<p>And you type:</p>
<pre><code class="language-console">$ just search "cat toupee"
</code></pre>
<p><code>just</code> will run the command <code>lynx https://www.google.com/?q=cat toupee</code>, which
will get parsed by <code>sh</code> as <code>lynx</code>, <code>https://www.google.com/?q=cat</code>, and
<code>toupee</code>, and not the intended <code>lynx</code> and <code>https://www.google.com/?q=cat toupee</code>.</p>
<p>You can fix this by adding quotes:</p>
<pre><code class="language-just">search QUERY:
  lynx 'https://www.google.com/?q={{QUERY}}'
</code></pre>
<p>Parameters prefixed with a <code>$</code> will be exported as environment variables:</p>
<pre><code class="language-just">foo $bar:
  echo $bar
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h3>
<p>Dependencies run before recipes that depend on them:</p>
<pre><code class="language-just">a: b
  @echo A

b:
  @echo B
</code></pre>
<pre><code>$ just a
B
A
</code></pre>
<p>In a given invocation of <code>just</code>, a recipe with the same arguments will only run
once, regardless of how many times it appears in the command-line invocation,
or how many times it appears as a dependency:</p>
<pre><code class="language-just">a:
  @echo A

b: a
  @echo B

c: a
  @echo C
</code></pre>
<pre><code>$ just a a a a a
A
$ just b c
A
B
C
</code></pre>
<p>Multiple recipes may depend on a recipe that performs some kind of setup, and
when those recipes run, that setup will only be performed once:</p>
<pre><code class="language-just">build:
  cc main.c

test-foo: build
  ./a.out --test foo

test-bar: build
  ./a.out --test bar
</code></pre>
<pre><code>$ just test-foo test-bar
cc main.c
./a.out --test foo
./a.out --test bar
</code></pre>
<p>Recipes in a given run are only skipped when they receive the same arguments:</p>
<pre><code class="language-just">build:
  cc main.c

test TEST: build
  ./a.out --test {{TEST}}
</code></pre>
<pre><code>$ just test foo test bar
cc main.c
./a.out --test foo
./a.out --test bar
</code></pre>
<h4 id="running-recipes-at-the-end-of-a-recipe"><a class="header" href="#running-recipes-at-the-end-of-a-recipe">Running Recipes at the End of a Recipe</a></h4>
<p>Normal dependencies of a recipes always run before a recipe starts. That is to
say, the dependee always runs before the depender. These dependencies are
called “prior dependencies”.</p>
<p>A recipe can also have subsequent dependencies, which run immediately after the
recipe and are introduced with an <code>&amp;&amp;</code>:</p>
<pre><code class="language-just">a:
  echo 'A!'

b: a &amp;&amp; c d
  echo 'B!'

c:
  echo 'C!'

d:
  echo 'D!'
</code></pre>
<p>…running <em>b</em> prints:</p>
<pre><code class="language-console">$ just b
echo 'A!'
A!
echo 'B!'
B!
echo 'C!'
C!
echo 'D!'
D!
</code></pre>
<h4 id="running-recipes-in-the-middle-of-a-recipe"><a class="header" href="#running-recipes-in-the-middle-of-a-recipe">Running Recipes in the Middle of a Recipe</a></h4>
<p><code>just</code> doesn’t support running recipes in the middle of another recipe, but you
can call <code>just</code> recursively in the middle of a recipe. Given the following
<code>justfile</code>:</p>
<pre><code class="language-just">a:
  echo 'A!'

b: a
  echo 'B start!'
  just c
  echo 'B end!'

c:
  echo 'C!'
</code></pre>
<p>…running <em>b</em> prints:</p>
<pre><code class="language-console">$ just b
echo 'A!'
A!
echo 'B start!'
B start!
echo 'C!'
C!
echo 'B end!'
B end!
</code></pre>
<p>This has limitations, since recipe <code>c</code> is run with an entirely new invocation
of <code>just</code>: Assignments will be recalculated, dependencies might run twice, and
command line arguments will not be propagated to the child <code>just</code> process.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="shebang-recipes"><a class="header" href="#shebang-recipes">Shebang Recipes</a></h3>
<p>Recipes that start with <code>#!</code> are called shebang recipes, and are executed by
saving the recipe body to a file and running it. This lets you write recipes in
different languages:</p>
<pre><code class="language-just">polyglot: python js perl sh ruby nu

python:
  #!/usr/bin/env python3
  print('Hello from python!')

js:
  #!/usr/bin/env node
  console.log('Greetings from JavaScript!')

perl:
  #!/usr/bin/env perl
  print "Larry Wall says Hi!\n";

sh:
  #!/usr/bin/env sh
  hello='Yo'
  echo "$hello from a shell script!"

nu:
  #!/usr/bin/env nu
  let hello = 'Hola'
  echo $"($hello) from a nushell script!"

ruby:
  #!/usr/bin/env ruby
  puts "Hello from ruby!"
</code></pre>
<pre><code class="language-console">$ just polyglot
Hello from python!
Greetings from JavaScript!
Larry Wall says Hi!
Yo from a shell script!
Hola from a nushell script!
Hello from ruby!
</code></pre>
<p>On Unix-like operating systems, including Linux and MacOS, shebang recipes are
executed by saving the recipe body to a file in a temporary directory, marking
the file as executable, and executing it. The OS then parses the shebang line
into a command line and invokes it, including the path to the file. For
example, if a recipe starts with <code>#!/usr/bin/env bash</code>, the final command that
the OS runs will be something like <code>/usr/bin/env bash /tmp/PATH_TO_SAVED_RECIPE_BODY</code>.</p>
<p>Shebang line splitting is operating system dependent. When passing a command
with arguments, you may need to tell <code>env</code> to split them explicitly by using
the <code>-S</code> flag:</p>
<pre><code class="language-just">run:
  #!/usr/bin/env -S bash -x
  ls
</code></pre>
<p>Windows does not support shebang lines. On Windows, <code>just</code> splits the shebang
line into a command and arguments, saves the recipe body to a file, and invokes
the split command and arguments, adding the path to the saved recipe body as
the final argument. For example, on Windows, if a recipe starts with <code>#! py</code>,
the final command the OS runs will be something like
<code>py C:\Temp\PATH_TO_SAVED_RECIPE_BODY</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="script-recipes"><a class="header" href="#script-recipes">Script Recipes</a></h3>
<p>Recipes with a <code>[script(COMMAND)]</code><sup>1.32.0</sup> attribute are run as
scripts interpreted by <code>COMMAND</code>. This avoids some of the issues with shebang
recipes, such as the use of <code>cygpath</code> on Windows, the need to use
<code>/usr/bin/env</code>, inconsistencies in shebang line splitting across Unix OSs, and
requiring a temporary directory from which files can be executed.</p>
<p>Recipes with an empty <code>[script]</code> attribute are executed with the value of <code>set script-interpreter := […]</code><sup>1.33.0</sup>, defaulting to <code>sh -eu</code>, and <em>not</em>
the value of <code>set shell</code>.</p>
<p>The body of the recipe is evaluated, written to disk in the temporary
directory, and run by passing its path as an argument to <code>COMMAND</code>.</p>
<p>The <code>[script(…)]</code> attribute is unstable, so you’ll need to use <code>set unstable</code>,
set the <code>JUST_UNSTABLE</code> environment variable, or pass <code>--unstable</code> on the
command line.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="script-and-shebang-recipe-temporary-files"><a class="header" href="#script-and-shebang-recipe-temporary-files">Script and Shebang Recipe Temporary Files</a></h3>
<p>Both script and shebang recipes write the recipe body to a temporary file for
execution. Script recipes execute that file by passing it to a command, while
shebang recipes execute the file directly. Shebang recipe execution will fail
if the filesystem containing the temporary file is mounted with <code>noexec</code> or is
otherwise non-executable.</p>
<p>The directory that <code>just</code> writes temporary files to may be configured in a
number of ways, from highest to lowest precedence:</p>
<ul>
<li>
<p>Globally with the <code>--tempdir</code> command-line option or the <code>JUST_TEMPDIR</code>
environment variable<sup>1.41.0</sup>.</p>
</li>
<li>
<p>On a per-module basis with the <code>tempdir</code> setting.</p>
</li>
<li>
<p>Globally on Linux with the <code>XDG_RUNTIME_DIR</code> environment variable.</p>
</li>
<li>
<p>Falling back to the directory returned by
<a href="https://doc.rust-lang.org/std/env/fn.temp_dir.html">std::env::temp_dir</a>.</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h3 id="python-recipes-with-uv"><a class="header" href="#python-recipes-with-uv">Python Recipes with <code>uv</code></a></h3>
<p><a href="https://github.com/astral-sh/uv"><code>uv</code></a> is an excellent cross-platform python
project manager, written in Rust.</p>
<p>Using the <code>[script]</code> attribute and <code>script-interpreter</code> setting, <code>just</code> can
easily be configured to run Python recipes with <code>uv</code>:</p>
<pre><code class="language-just">set unstable

set script-interpreter := ['uv', 'run', '--script']

[script]
hello:
  print("Hello from Python!")

[script]
goodbye:
  # /// script
  # requires-python = "&gt;=3.11"
  # dependencies=["sh"]
  # ///
  import sh
  print(sh.echo("Goodbye from Python!"), end='')
</code></pre>
<p>Of course, a shebang also works:</p>
<pre><code class="language-just">hello:
  #!/usr/bin/env -S uv run --script
  print("Hello from Python!")
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="safer-bash-shebang-recipes"><a class="header" href="#safer-bash-shebang-recipes">Safer Bash Shebang Recipes</a></h3>
<p>If you’re writing a <code>bash</code> shebang recipe, consider adding <code>set -euxo pipefail</code>:</p>
<pre><code class="language-just">foo:
  #!/usr/bin/env bash
  set -euxo pipefail
  hello='Yo'
  echo "$hello from Bash!"
</code></pre>
<p>It isn’t strictly necessary, but <code>set -euxo pipefail</code> turns on a few useful
features that make <code>bash</code> shebang recipes behave more like normal, linewise
<code>just</code> recipe:</p>
<ul>
<li>
<p><code>set -e</code> makes <code>bash</code> exit if a command fails.</p>
</li>
<li>
<p><code>set -u</code> makes <code>bash</code> exit if a variable is undefined.</p>
</li>
<li>
<p><code>set -x</code> makes <code>bash</code> print each script line before it’s run.</p>
</li>
<li>
<p><code>set -o pipefail</code> makes <code>bash</code> exit if a command in a pipeline fails. This is
<code>bash</code>-specific, so isn’t turned on in normal linewise <code>just</code> recipes.</p>
</li>
</ul>
<p>Together, these avoid a lot of shell scripting gotchas.</p>
<h4 id="shebang-recipe-execution-on-windows"><a class="header" href="#shebang-recipe-execution-on-windows">Shebang Recipe Execution on Windows</a></h4>
<p>On Windows, shebang interpreter paths containing a <code>/</code> are translated from
Unix-style paths to Windows-style paths using <code>cygpath</code>, a utility that ships
with <a href="http://www.cygwin.com">Cygwin</a>.</p>
<p>For example, to execute this recipe on Windows:</p>
<pre><code class="language-just">echo:
  #!/bin/sh
  echo "Hello!"
</code></pre>
<p>The interpreter path <code>/bin/sh</code> will be translated to a Windows-style path using
<code>cygpath</code> before being executed.</p>
<p>If the interpreter path does not contain a <code>/</code> it will be executed without
being translated. This is useful if <code>cygpath</code> is not available, or you wish to
pass a Windows-style path to the interpreter.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="setting-variables-in-a-recipe"><a class="header" href="#setting-variables-in-a-recipe">Setting Variables in a Recipe</a></h3>
<p>Recipe lines are interpreted by the shell, not <code>just</code>, so it’s not possible to
set <code>just</code> variables in the middle of a recipe:</p>
<pre><code class="language-justfile">foo:
  x := "hello" # This doesn't work!
  echo {{x}}
</code></pre>
<p>It is possible to use shell variables, but there’s another problem. Every
recipe line is run by a new shell instance, so variables set in one line won’t
be set in the next:</p>
<pre><code class="language-just">foo:
  x=hello &amp;&amp; echo $x # This works!
  y=bye
  echo $y            # This doesn't, `y` is undefined here!
</code></pre>
<p>The best way to work around this is to use a shebang recipe. Shebang recipe
bodies are extracted and run as scripts, so a single shell instance will run
the whole thing:</p>
<pre><code class="language-just">foo:
  #!/usr/bin/env bash
  set -euxo pipefail
  x=hello
  echo $x
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="sharing-environment-variables-between-recipes"><a class="header" href="#sharing-environment-variables-between-recipes">Sharing Environment Variables Between Recipes</a></h3>
<p>Each line of each recipe is executed by a fresh shell, so it is not possible to
share environment variables between recipes.</p>
<h4 id="using-python-virtual-environments"><a class="header" href="#using-python-virtual-environments">Using Python Virtual Environments</a></h4>
<p>Some tools, like <a href="https://docs.python.org/3/library/venv.html">Python’s venv</a>,
require loading environment variables in order to work, making them challenging
to use with <code>just</code>. As a workaround, you can execute the virtual environment
binaries directly:</p>
<pre><code class="language-just">venv:
  [ -d foo ] || python3 -m venv foo

run: venv
  ./foo/bin/python3 main.py
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="changing-the-working-directory-in-a-recipe"><a class="header" href="#changing-the-working-directory-in-a-recipe">Changing the Working Directory in a Recipe</a></h3>
<p>Each recipe line is executed by a new shell, so if you change the working
directory on one line, it won’t have an effect on later lines:</p>
<pre><code class="language-just">foo:
  pwd    # This `pwd` will print the same directory…
  cd bar
  pwd    # …as this `pwd`!
</code></pre>
<p>There are a couple ways around this. One is to call <code>cd</code> on the same line as
the command you want to run:</p>
<pre><code class="language-just">foo:
  cd bar &amp;&amp; pwd
</code></pre>
<p>The other is to use a shebang recipe. Shebang recipe bodies are extracted and
run as scripts, so a single shell instance will run the whole thing, and thus a
<code>cd</code> on one line will affect later lines, just like a shell script:</p>
<pre><code class="language-just">foo:
  #!/usr/bin/env bash
  set -euxo pipefail
  cd bar
  pwd
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="indentation"><a class="header" href="#indentation">Indentation</a></h3>
<p>Recipe lines can be indented with spaces or tabs, but not a mix of both. All of
a recipe’s lines must have the same type of indentation, but different recipes
in the same <code>justfile</code> may use different indentation.</p>
<p>Each recipe must be indented at least one level from the <code>recipe-name</code> but
after that may be further indented.</p>
<p>Here’s a justfile with a recipe indented with spaces, represented as <code>·</code>, and
tabs, represented as <code>→</code>.</p>
<pre><code class="language-justfile">set windows-shell := ["pwsh", "-NoLogo", "-NoProfileLoadTime", "-Command"]

set ignore-comments

list-space directory:
··#!pwsh
··foreach ($item in $(Get-ChildItem {{directory}} )) {
····echo $item.Name
··}
··echo ""

# indentation nesting works even when newlines are escaped
list-tab directory:
→ @foreach ($item in $(Get-ChildItem {{directory}} )) { \
→ → echo $item.Name \
→ }
→ @echo ""
</code></pre>
<pre><code class="language-pwsh">PS &gt; just list-space ~
Desktop
Documents
Downloads

PS &gt; just list-tab ~
Desktop
Documents
Downloads
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="multi-line-constructs"><a class="header" href="#multi-line-constructs">Multi-Line Constructs</a></h3>
<p>Recipes without an initial shebang are evaluated and run line-by-line, which
means that multi-line constructs probably won’t do what you want.</p>
<p>For example, with the following <code>justfile</code>:</p>
<pre><code class="language-justfile">conditional:
  if true; then
    echo 'True!'
  fi
</code></pre>
<p>The extra leading whitespace before the second line of the <code>conditional</code> recipe
will produce a parse error:</p>
<pre><code class="language-console">$ just conditional
error: Recipe line has extra leading whitespace
  |
3 |         echo 'True!'
  |     ^^^^^^^^^^^^^^^^
</code></pre>
<p>To work around this, you can write conditionals on one line, escape newlines
with slashes, or add a shebang to your recipe. Some examples of multi-line
constructs are provided for reference.</p>
<h4 id="if-statements"><a class="header" href="#if-statements"><code>if</code> statements</a></h4>
<pre><code class="language-just">conditional:
  if true; then echo 'True!'; fi
</code></pre>
<pre><code class="language-just">conditional:
  if true; then \
    echo 'True!'; \
  fi
</code></pre>
<pre><code class="language-just">conditional:
  #!/usr/bin/env sh
  if true; then
    echo 'True!'
  fi
</code></pre>
<h4 id="for-loops"><a class="header" href="#for-loops"><code>for</code> loops</a></h4>
<pre><code class="language-just">for:
  for file in `ls .`; do echo $file; done
</code></pre>
<pre><code class="language-just">for:
  for file in `ls .`; do \
    echo $file; \
  done
</code></pre>
<pre><code class="language-just">for:
  #!/usr/bin/env sh
  for file in `ls .`; do
    echo $file
  done
</code></pre>
<h4 id="while-loops"><a class="header" href="#while-loops"><code>while</code> loops</a></h4>
<pre><code class="language-just">while:
  while `server-is-dead`; do ping -c 1 server; done
</code></pre>
<pre><code class="language-just">while:
  while `server-is-dead`; do \
    ping -c 1 server; \
  done
</code></pre>
<pre><code class="language-just">while:
  #!/usr/bin/env sh
  while `server-is-dead`; do
    ping -c 1 server
  done
</code></pre>
<h4 id="outside-recipe-bodies"><a class="header" href="#outside-recipe-bodies">Outside Recipe Bodies</a></h4>
<p>Parenthesized expressions can span multiple lines:</p>
<pre><code class="language-just">abc := ('a' +
        'b'
         + 'c')

abc2 := (
  'a' +
  'b' +
  'c'
)

foo param=('foo'
      + 'bar'
    ):
  echo {{param}}

bar: (foo
        'Foo'
     )
  echo 'Bar!'
</code></pre>
<p>Lines ending with a backslash continue on to the next line as if the lines were
joined by whitespace<sup>1.15.0</sup>:</p>
<pre><code class="language-just">a := 'foo' + \
     'bar'

foo param1 \
  param2='foo' \
  *varparam='': dep1 \
                (dep2 'foo')
  echo {{param1}} {{param2}} {{varparam}}

dep1: \
    # this comment is not part of the recipe body
  echo 'dep1'

dep2 \
  param:
    echo 'Dependency with parameter {{param}}'
</code></pre>
<p>Backslash line continuations can also be used in interpolations. The line
following the backslash must be indented.</p>
<pre><code class="language-just">recipe:
  echo '{{ \
  "This interpolation " + \
    "has a lot of text." \
  }}'
  echo 'back to recipe body'
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="command-line-options"><a class="header" href="#command-line-options">Command-line Options</a></h3>
<p><code>just</code> supports a number of useful command-line options for listing, dumping,
and debugging recipes and variables:</p>
<pre><code class="language-console">$ just --list
Available recipes:
  js
  perl
  polyglot
  python
  ruby
$ just --show perl
perl:
  #!/usr/bin/env perl
  print "Larry Wall says Hi!\n";
$ just --show polyglot
polyglot: python js perl sh ruby
</code></pre>
<h4 id="setting-command-line-options-with-environment-variables"><a class="header" href="#setting-command-line-options-with-environment-variables">Setting Command-line Options with Environment Variables</a></h4>
<p>Some command-line options can be set with environment variables</p>
<p>For example, unstable features can be enabled either with the <code>--unstable</code>
flag:</p>
<pre><code class="language-console">$ just --unstable
</code></pre>
<p>Or by setting the <code>JUST_UNSTABLE</code> environment variable:</p>
<pre><code class="language-console">$ export JUST_UNSTABLE=1
$ just
</code></pre>
<p>Since environment variables are inherited by child processes, command-line
options set with environment variables are inherited by recursive invocations
of <code>just</code>, where as command line options set with arguments are not.</p>
<p>Consult <code>just --help</code> for which options can be set with environment variables.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="private-recipes"><a class="header" href="#private-recipes">Private Recipes</a></h3>
<p>Recipes and aliases whose name starts with a <code>_</code> are omitted from <code>just --list</code>:</p>
<pre><code class="language-just">test: _test-helper
  ./bin/test

_test-helper:
  ./bin/super-secret-test-helper-stuff
</code></pre>
<pre><code class="language-console">$ just --list
Available recipes:
    test
</code></pre>
<p>And from <code>just --summary</code>:</p>
<pre><code class="language-console">$ just --summary
test
</code></pre>
<p>The <code>[private]</code> attribute<sup>1.10.0</sup> may also be used to hide recipes or
aliases without needing to change the name:</p>
<pre><code class="language-just">[private]
foo:

[private]
alias b := bar

bar:
</code></pre>
<pre><code class="language-console">$ just --list
Available recipes:
    bar
</code></pre>
<p>This is useful for helper recipes which are only meant to be used as
dependencies of other recipes.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="quiet-recipes"><a class="header" href="#quiet-recipes">Quiet Recipes</a></h3>
<p>A recipe name may be prefixed with <code>@</code> to invert the meaning of <code>@</code> before each
line:</p>
<pre><code class="language-just">@quiet:
  echo hello
  echo goodbye
  @# all done!
</code></pre>
<p>Now only the lines starting with <code>@</code> will be echoed:</p>
<pre><code class="language-console">$ just quiet
hello
goodbye
# all done!
</code></pre>
<p>All recipes in a Justfile can be made quiet with <code>set quiet</code>:</p>
<pre><code class="language-just">set quiet

foo:
  echo "This is quiet"

@foo2:
  echo "This is also quiet"
</code></pre>
<p>The <code>[no-quiet]</code> attribute overrides this setting:</p>
<pre><code class="language-just">set quiet

foo:
  echo "This is quiet"

[no-quiet]
foo2:
  echo "This is not quiet"
</code></pre>
<p>Shebang recipes are quiet by default:</p>
<pre><code class="language-just">foo:
  #!/usr/bin/env bash
  echo 'Foo!'
</code></pre>
<pre><code class="language-console">$ just foo
Foo!
</code></pre>
<p>Adding <code>@</code> to a shebang recipe name makes <code>just</code> print the recipe before
executing it:</p>
<pre><code class="language-just">@bar:
  #!/usr/bin/env bash
  echo 'Bar!'
</code></pre>
<pre><code class="language-console">$ just bar
#!/usr/bin/env bash
echo 'Bar!'
Bar!
</code></pre>
<p><code>just</code> normally prints error messages when a recipe line fails. These error
messages can be suppressed using the <code>[no-exit-message]</code><sup>1.7.0</sup>
attribute. You may find this especially useful with a recipe that wraps a tool:</p>
<pre><code class="language-just">git *args:
    @git {{args}}
</code></pre>
<pre><code class="language-console">$ just git status
fatal: not a git repository (or any of the parent directories): .git
error: Recipe `git` failed on line 2 with exit code 128
</code></pre>
<p>Add the attribute to suppress the exit error message when the tool exits with a
non-zero code:</p>
<pre><code class="language-just">[no-exit-message]
git *args:
    @git {{args}}
</code></pre>
<pre><code class="language-console">$ just git status
fatal: not a git repository (or any of the parent directories): .git
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="selecting-recipes-to-run-with-an-interactive-chooser"><a class="header" href="#selecting-recipes-to-run-with-an-interactive-chooser">Selecting Recipes to Run With an Interactive Chooser</a></h3>
<p>The <code>--choose</code> subcommand makes <code>just</code> invoke a chooser to select which recipes
to run. Choosers should read lines containing recipe names from standard input
and print one or more of those names separated by spaces to standard output.</p>
<p>Because there is currently no way to run a recipe that requires arguments with
<code>--choose</code>, such recipes will not be given to the chooser. Private recipes and
aliases are also skipped.</p>
<p>The chooser can be overridden with the <code>--chooser</code> flag. If <code>--chooser</code> is not
given, then <code>just</code> first checks if <code>$JUST_CHOOSER</code> is set. If it isn’t, then
the chooser defaults to <code>fzf</code>, a popular fuzzy finder.</p>
<p>Arguments can be included in the chooser, i.e. <code>fzf --exact</code>.</p>
<p>The chooser is invoked in the same way as recipe lines. For example, if the
chooser is <code>fzf</code>, it will be invoked with <code>sh -cu 'fzf'</code>, and if the shell, or
the shell arguments are overridden, the chooser invocation will respect those
overrides.</p>
<p>If you’d like <code>just</code> to default to selecting recipes with a chooser, you can
use this as your default recipe:</p>
<pre><code class="language-just">default:
  @just --choose
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="invoking-justfiles-in-other-directories"><a class="header" href="#invoking-justfiles-in-other-directories">Invoking <code>justfile</code>s in Other Directories</a></h3>
<p>If the first argument passed to <code>just</code> contains a <code>/</code>, then the following
occurs:</p>
<ol>
<li>
<p>The argument is split at the last <code>/</code>.</p>
</li>
<li>
<p>The part before the last <code>/</code> is treated as a directory. <code>just</code> will start
its search for the <code>justfile</code> there, instead of in the current directory.</p>
</li>
<li>
<p>The part after the last slash is treated as a normal argument, or ignored
if it is empty.</p>
</li>
</ol>
<p>This may seem a little strange, but it’s useful if you wish to run a command in
a <code>justfile</code> that is in a subdirectory.</p>
<p>For example, if you are in a directory which contains a subdirectory named
<code>foo</code>, which contains a <code>justfile</code> with the recipe <code>build</code>, which is also the
default recipe, the following are all equivalent:</p>
<pre><code class="language-console">$ (cd foo &amp;&amp; just build)
$ just foo/build
$ just foo/
</code></pre>
<p>Additional recipes after the first are sought in the same <code>justfile</code>. For
example, the following are both equivalent:</p>
<pre><code class="language-console">$ just foo/a b
$ (cd foo &amp;&amp; just a b)
</code></pre>
<p>And will both invoke recipes <code>a</code> and <code>b</code> in <code>foo/justfile</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="imports"><a class="header" href="#imports">Imports</a></h3>
<p>One <code>justfile</code> can include the contents of another using <code>import</code> statements.</p>
<p>If you have the following <code>justfile</code>:</p>
<pre><code class="language-justfile">import 'foo/bar.just'

a: b
  @echo A
</code></pre>
<p>And the following text in <code>foo/bar.just</code>:</p>
<pre><code class="language-just">b:
  @echo B
</code></pre>
<p><code>foo/bar.just</code> will be included in <code>justfile</code> and recipe <code>b</code> will be defined:</p>
<pre><code class="language-console">$ just b
B
$ just a
B
A
</code></pre>
<p>The <code>import</code> path can be absolute or relative to the location of the justfile
containing it. A leading <code>~/</code> in the import path is replaced with the current
users home directory.</p>
<p>Justfiles are insensitive to order, so included files can reference variables
and recipes defined after the <code>import</code> statement.</p>
<p>Imported files can themselves contain <code>import</code>s, which are processed
recursively.</p>
<p><code>allow-duplicate-recipes</code> and <code>allow-duplicate-variables</code> allow duplicate
recipes and variables, respectively, to override each other, instead of
producing an error.</p>
<p>Within a module, later definitions override earlier definitions:</p>
<pre><code class="language-just">set allow-duplicate-recipes

foo:

foo:
  echo 'yes'
</code></pre>
<p>When <code>import</code>s are involved, things unfortunately get much more complicated and
hard to explain.</p>
<p>Shallower definitions always override deeper definitions, so recipes at the top
level will override recipes in imports, and recipes in an import will override
recipes in an import which itself imports those recipes.</p>
<p>When two duplicate definitions are imported and are at the same depth, the one
from the earlier import will override the one from the later import.</p>
<p>This is because <code>just</code> uses a stack when processing imports, pushing imports
onto the stack in source-order, and always processing the top of the stack
next, so earlier imports are actually handled later by the compiler.</p>
<p>This is definitely a bug, but since <code>just</code> has very strong backwards
compatibility guarantees and we take enormous pains not to break anyone’s
<code>justfile</code>, we have created issue #2540 to discuss whether or not we can
actually fix it.</p>
<p>Imports may be made optional by putting a <code>?</code> after the <code>import</code> keyword:</p>
<pre><code class="language-just">import? 'foo/bar.just'
</code></pre>
<p>Importing the same source file multiple times is not an error<sup>1.37.0</sup>.
This allows importing multiple justfiles, for example <code>foo.just</code> and
<code>bar.just</code>, which both import a third justfile containing shared recipes, for
example <code>baz.just</code>, without the duplicate import of <code>baz.just</code> being an error:</p>
<pre><code class="language-justfile"># justfile
import 'foo.just'
import 'bar.just'
</code></pre>
<pre><code class="language-justfile"># foo.just
import 'baz.just'
foo: baz
</code></pre>
<pre><code class="language-justfile"># bar.just
import 'baz.just'
bar: baz
</code></pre>
<pre><code class="language-just"># baz
baz:
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="modules1190"><a class="header" href="#modules1190">Modules<sup>1.19.0</sup></a></h3>
<p>A <code>justfile</code> can declare modules using <code>mod</code> statements.</p>
<p><code>mod</code> statements were stabilized in <code>just</code><sup>1.31.0</sup>. In earlier
versions, you’ll need to use the <code>--unstable</code> flag, <code>set unstable</code>, or set the
<code>JUST_UNSTABLE</code> environment variable to use them.</p>
<p>If you have the following <code>justfile</code>:</p>
<pre><code class="language-justfile">mod bar

a:
  @echo A
</code></pre>
<p>And the following text in <code>bar.just</code>:</p>
<pre><code class="language-just">b:
  @echo B
</code></pre>
<p><code>bar.just</code> will be included in <code>justfile</code> as a submodule. Recipes, aliases, and
variables defined in one submodule cannot be used in another, and each module
uses its own settings.</p>
<p>Recipes in submodules can be invoked as subcommands:</p>
<pre><code class="language-console">$ just bar b
B
</code></pre>
<p>Or with path syntax:</p>
<pre><code class="language-console">$ just bar::b
B
</code></pre>
<p>If a module is named <code>foo</code>, just will search for the module file in <code>foo.just</code>,
<code>foo/mod.just</code>, <code>foo/justfile</code>, and <code>foo/.justfile</code>. In the latter two cases,
the module file may have any capitalization.</p>
<p>Module statements may be of the form:</p>
<pre><code class="language-justfile">mod foo 'PATH'
</code></pre>
<p>Which loads the module’s source file from <code>PATH</code>, instead of from the usual
locations. A leading <code>~/</code> in <code>PATH</code> is replaced with the current user’s home
directory. <code>PATH</code> may point to the module source file itself, or to a directory
containing the module source file with the name <code>mod.just</code>, <code>justfile</code>, or
<code>.justfile</code>. In the latter two cases, the module file may have any
capitalization.</p>
<p>Environment files are only loaded for the root justfile, and loaded environment
variables are available in submodules. Settings in submodules that affect
environment file loading are ignored.</p>
<p>Recipes in submodules without the <code>[no-cd]</code> attribute run with the working
directory set to the directory containing the submodule source file.</p>
<p><code>justfile()</code> and <code>justfile_directory()</code> always return the path to the root
justfile and the directory that contains it, even when called from submodule
recipes.</p>
<p>Modules may be made optional by putting a <code>?</code> after the <code>mod</code> keyword:</p>
<pre><code class="language-just">mod? foo
</code></pre>
<p>Missing source files for optional modules do not produce an error.</p>
<p>Optional modules with no source file do not conflict, so you can have multiple
mod statements with the same name, but with different source file paths, as
long as at most one source file exists:</p>
<pre><code class="language-just">mod? foo 'bar.just'
mod? foo 'baz.just'
</code></pre>
<p>Modules may be given doc comments which appear in <code>--list</code>
output<sup>1.30.0</sup>:</p>
<pre><code class="language-justfile"># foo is a great module!
mod foo
</code></pre>
<pre><code class="language-console">$ just --list
Available recipes:
    foo ... # foo is a great module!
</code></pre>
<p>Modules are still missing a lot of features, for example, the ability to depend
on recipes and refer to variables in other modules. See the
<a href="https://github.com/casey/just/issues/2252">module improvement tracking issue</a>
for more information.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="hiding-justfiles"><a class="header" href="#hiding-justfiles">Hiding <code>justfile</code>s</a></h3>
<p><code>just</code> looks for <code>justfile</code>s named <code>justfile</code> and <code>.justfile</code>, which can be
used to keep a <code>justfile</code> hidden.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="just-scripts"><a class="header" href="#just-scripts">Just Scripts</a></h3>
<p>By adding a shebang line to the top of a <code>justfile</code> and making it executable,
<code>just</code> can be used as an interpreter for scripts:</p>
<pre><code class="language-console">$ cat &gt; script &lt;&lt;EOF
#!/usr/bin/env just --justfile

foo:
  echo foo
EOF
$ chmod +x script
$ ./script foo
echo foo
foo
</code></pre>
<p>When a script with a shebang is executed, the system supplies the path to the
script as an argument to the command in the shebang. So, with a shebang of
<code>#!/usr/bin/env just --justfile</code>, the command will be <code>/usr/bin/env just --justfile PATH_TO_SCRIPT</code>.</p>
<p>With the above shebang, <code>just</code> will change its working directory to the
location of the script. If you’d rather leave the working directory unchanged,
use <code>#!/usr/bin/env just --working-directory . --justfile</code>.</p>
<p>Note: Shebang line splitting is not consistent across operating systems. The
previous examples have only been tested on macOS. On Linux, you may need to
pass the <code>-S</code> flag to <code>env</code>:</p>
<pre><code class="language-just">#!/usr/bin/env -S just --justfile

default:
  echo foo
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="formatting-and-dumping-justfiles"><a class="header" href="#formatting-and-dumping-justfiles">Formatting and dumping <code>justfile</code>s</a></h3>
<p>Each <code>justfile</code> has a canonical formatting with respect to whitespace and
newlines.</p>
<p>You can overwrite the current justfile with a canonically-formatted version
using the currently-unstable <code>--fmt</code> flag:</p>
<pre><code class="language-console">$ cat justfile
# A lot of blank lines





some-recipe:
  echo "foo"
$ just --fmt --unstable
$ cat justfile
# A lot of blank lines

some-recipe:
    echo "foo"
</code></pre>
<p>Invoking <code>just --fmt --check --unstable</code> runs <code>--fmt</code> in check mode. Instead of
overwriting the <code>justfile</code>, <code>just</code> will exit with an exit code of 0 if it is
formatted correctly, and will exit with 1 and print a diff if it is not.</p>
<p>You can use the <code>--dump</code> command to output a formatted version of the
<code>justfile</code> to stdout:</p>
<pre><code class="language-console">$ just --dump &gt; formatted-justfile
</code></pre>
<p>The <code>--dump</code> command can be used with <code>--dump-format json</code> to print a JSON
representation of a <code>justfile</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="fallback-to-parent-justfiles"><a class="header" href="#fallback-to-parent-justfiles">Fallback to parent <code>justfile</code>s</a></h3>
<p>If a recipe is not found in a <code>justfile</code> and the <code>fallback</code> setting is set,
<code>just</code> will look for <code>justfile</code>s in the parent directory and up, until it
reaches the root directory. <code>just</code> will stop after it reaches a <code>justfile</code> in
which the <code>fallback</code> setting is <code>false</code> or unset.</p>
<p>As an example, suppose the current directory contains this <code>justfile</code>:</p>
<pre><code class="language-just">set fallback
foo:
  echo foo
</code></pre>
<p>And the parent directory contains this <code>justfile</code>:</p>
<pre><code class="language-just">bar:
  echo bar
</code></pre>
<pre><code class="language-console">$ just bar
Trying ../justfile
echo bar
bar
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="avoiding-argument-splitting"><a class="header" href="#avoiding-argument-splitting">Avoiding Argument Splitting</a></h3>
<p>Given this <code>justfile</code>:</p>
<pre><code class="language-just">foo argument:
  touch {{argument}}
</code></pre>
<p>The following command will create two files, <code>some</code> and <code>argument.txt</code>:</p>
<pre><code class="language-console">$ just foo "some argument.txt"
</code></pre>
<p>The user’s shell will parse <code>"some argument.txt"</code> as a single argument, but
when <code>just</code> replaces <code>touch {{argument}}</code> with <code>touch some argument.txt</code>, the
quotes are not preserved, and <code>touch</code> will receive two arguments.</p>
<p>There are a few ways to avoid this: quoting, positional arguments, and exported
arguments.</p>
<h4 id="quoting"><a class="header" href="#quoting">Quoting</a></h4>
<p>Quotes can be added around the <code>{{argument}}</code> interpolation:</p>
<pre><code class="language-just">foo argument:
  touch '{{argument}}'
</code></pre>
<p>This preserves <code>just</code>’s ability to catch variable name typos before running,
for example if you were to write <code>{{argument}}</code>, but will not do what you want
if the value of <code>argument</code> contains single quotes.</p>
<h4 id="positional-arguments-1"><a class="header" href="#positional-arguments-1">Positional Arguments</a></h4>
<p>The <code>positional-arguments</code> setting causes all arguments to be passed as
positional arguments, allowing them to be accessed with <code>$1</code>, <code>$2</code>, …, and
<code>$@</code>, which can be then double-quoted to avoid further splitting by the shell:</p>
<pre><code class="language-just">set positional-arguments

foo argument:
  touch "$1"
</code></pre>
<p>This defeats <code>just</code>’s ability to catch typos, for example if you type <code>$2</code>
instead of <code>$1</code>, but works for all possible values of <code>argument</code>, including
those with double quotes.</p>
<h4 id="exported-arguments"><a class="header" href="#exported-arguments">Exported Arguments</a></h4>
<p>All arguments are exported when the <code>export</code> setting is set:</p>
<pre><code class="language-just">set export

foo argument:
  touch "$argument"
</code></pre>
<p>Or individual arguments may be exported by prefixing them with <code>$</code>:</p>
<pre><code class="language-just">foo $argument:
  touch "$argument"
</code></pre>
<p>This defeats <code>just</code>’s ability to catch typos, for example if you type
<code>$argument</code>, but works for all possible values of <code>argument</code>, including those
with double quotes.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="configuring-the-shell"><a class="header" href="#configuring-the-shell">Configuring the Shell</a></h3>
<p>There are a number of ways to configure the shell for linewise recipes, which
are the default when a recipe does not start with a <code>#!</code> shebang. Their
precedence, from highest to lowest, is:</p>
<ol>
<li>The <code>--shell</code> and <code>--shell-arg</code> command line options. Passing either of
these will cause <code>just</code> to ignore any settings in the current justfile.</li>
<li><code>set windows-shell := [...]</code></li>
<li><code>set windows-powershell</code> (deprecated)</li>
<li><code>set shell := [...]</code></li>
</ol>
<p>Since <code>set windows-shell</code> has higher precedence than <code>set shell</code>, you can use
<code>set windows-shell</code> to pick a shell on Windows, and <code>set shell</code> to pick a shell
for all other platforms.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="timestamps"><a class="header" href="#timestamps">Timestamps</a></h3>
<p><code>just</code> can print timestamps before each recipe commands:</p>
<pre><code class="language-just">recipe:
  echo one
  sleep 2
  echo two
</code></pre>
<pre><code>$ just --timestamp recipe
[07:28:46] echo one
one
[07:28:46] sleep 2
[07:28:48] echo two
two
</code></pre>
<p>By default, timestamps are formatted as <code>HH:MM:SS</code>. The format can be changed
with <code>--timestamp-format</code>:</p>
<pre><code>$ just --timestamp recipe --timestamp-format '%H:%M:%S%.3f %Z'
[07:32:11:.349 UTC] echo one
one
[07:32:11:.350 UTC] sleep 2
[07:32:13:.352 UTC] echo two
two
</code></pre>
<p>The argument to <code>--timestamp-format</code> is a <code>strftime</code>-style format string, see
the
<a href="https://docs.rs/chrono/latest/chrono/format/strftime/index.html"><code>chrono</code> library docs</a>
for details.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="signal-handling"><a class="header" href="#signal-handling">Signal Handling</a></h3>
<p><a href="https://en.wikipedia.org/wiki/Signal_(IPC)">Signals</a> are messsages sent to
running programs to trigger specific behavior. For example, <code>SIGINT</code> is sent to
all processes in the terminal forground process group when <code>CTRL-C</code> is pressed.</p>
<p><code>just</code> tries to exit when requested by a signal, but it also tries to avoid
leaving behind running child proccesses, two goals which are somewhat in
conflict.</p>
<p>If <code>just</code> exits leaving behind child processes, the user will have no recourse
but to <code>ps aux | grep</code> for the children and manually <code>kill</code> them, a tedious
endevour.</p>
<h4 id="fatal-signals"><a class="header" href="#fatal-signals">Fatal Signals</a></h4>
<p><code>SIGHUP</code>, <code>SIGINT</code>, and <code>SIGQUIT</code> are generated when the user closes the
terminal, types <code>ctrl-c</code>, or types <code>ctrl-\</code>, respectively, and are sent to all
processes in the foreground process group.</p>
<p><code>SIGTERM</code> is the default signal sent by the <code>kill</code> command, and is delivered
only to its intended victim.</p>
<p>When a child process is not running, <code>just</code> will exit immediately on receipt of
any of the above signals.</p>
<p>When a child process <em>is</em> running, <code>just</code> will wait until it terminates, to
avoid leaving it behind.</p>
<p>Additionally, on receipt of <code>SIGTERM</code>, <code>just</code> will forward <code>SIGTERM</code> to any
running children<sup>1.41.0</sup>, since unlike other fatal signals, <code>SIGTERM</code>,
was likely sent to <code>just</code> alone.</p>
<p>Regardless of whether a child process terminates successfully after <code>just</code>
receives a fatal signal, <code>just</code> halts execution.</p>
<h4 id="siginfo"><a class="header" href="#siginfo"><code>SIGINFO</code></a></h4>
<p><code>SIGINFO</code> is sent to all processes in the foreground process group when the
user types <code>ctrl-t</code> on
<a href="https://en.wikipedia.org/wiki/Berkeley_Software_Distribution">BSD</a>-derived
operating systems, including MacOS, but not Linux.</p>
<p><code>just</code> responds by printing a list of all child process IDs and
commands<sup>1.41.0</sup>.</p>
<h4 id="windows-1"><a class="header" href="#windows-1">Windows</a></h4>
<p>On Windows, <code>just</code> behaves as if it had received <code>SIGINT</code> when the user types
<code>ctrl-c</code>. Other signals are unsupported.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="changelog"><a class="header" href="#changelog">Changelog</a></h2>
<p>A changelog for the latest release is available in
<a href="https://raw.githubusercontent.com/casey/just/master/CHANGELOG.md">CHANGELOG.md</a>.
Changelogs for previous releases are available on
<a href="https://github.com/casey/just/releases">the releases page</a>. <code>just --changelog</code>
can also be used to make a <code>just</code> binary print its changelog.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="re-running-recipes-when-files-change"><a class="header" href="#re-running-recipes-when-files-change">Re-running recipes when files change</a></h3>
<p><a href="https://github.com/mattgreen/watchexec"><code>watchexec</code></a> can re-run any command
when files change.</p>
<p>To re-run the recipe <code>foo</code> when any file changes:</p>
<pre><code class="language-console">watchexec just foo
</code></pre>
<p>See <code>watchexec --help</code> for more info, including how to specify which files
should be watched for changes.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="running-tasks-in-parallel"><a class="header" href="#running-tasks-in-parallel">Running tasks in parallel</a></h3>
<p>GNU parallel can be used to run tasks concurrently:</p>
<pre><code class="language-just">parallel:
  #!/usr/bin/env -S parallel --shebang --ungroup --jobs {{ num_cpus() }}
  echo task 1 start; sleep 3; echo task 1 done
  echo task 2 start; sleep 3; echo task 2 done
  echo task 3 start; sleep 3; echo task 3 done
  echo task 4 start; sleep 3; echo task 4 done
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="shell-alias"><a class="header" href="#shell-alias">Shell Alias</a></h3>
<p>For lightning-fast command running, put <code>alias j=just</code> in your shell’s
configuration file.</p>
<p>In <code>bash</code>, the aliased command may not keep the shell completion functionality
described in the next section. Add the following line to your <code>.bashrc</code> to use
the same completion function as <code>just</code> for your aliased command:</p>
<pre><code class="language-console">complete -F _just -o bashdefault -o default j
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="shell-completion-scripts"><a class="header" href="#shell-completion-scripts">Shell Completion Scripts</a></h3>
<p>Shell completion scripts for Bash, Elvish, Fish, Nushell, PowerShell, and Zsh
are available <a href="https://github.com/casey/just/releases">release archives</a>.</p>
<p>The <code>just</code> binary can also generate the same completion scripts at runtime
using <code>just --completions SHELL</code>:</p>
<pre><code class="language-console">$ just --completions zsh &gt; just.zsh
</code></pre>
<p>Please refer to your shell’s documentation for how to install them.</p>
<p><em>macOS Note:</em> Recent versions of macOS use zsh as the default shell. If you use
Homebrew to install <code>just</code>, it will automatically install the most recent copy
of the zsh completion script in the Homebrew zsh directory, which the built-in
version of zsh doesn’t know about by default. It’s best to use this copy of the
script if possible, since it will be updated whenever you update <code>just</code> via
Homebrew. Also, many other Homebrew packages use the same location for
completion scripts, and the built-in zsh doesn’t know about those either. To
take advantage of <code>just</code> completion in zsh in this scenario, you can set
<code>fpath</code> to the Homebrew location before calling <code>compinit</code>. Note also that Oh
My Zsh runs <code>compinit</code> by default. So your <code>.zshrc</code> file could look like this:</p>
<pre><code class="language-zsh"># Init Homebrew, which adds environment variables
eval "$(brew shellenv)"

fpath=($HOMEBREW_PREFIX/share/zsh/site-functions $fpath)

# Then choose one of these options:
# 1. If you're using Oh My Zsh, you can initialize it here
# source $ZSH/oh-my-zsh.sh

# 2. Otherwise, run compinit yourself
# autoload -U compinit
# compinit
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="man-page"><a class="header" href="#man-page">Man Page</a></h3>
<p><code>just</code> can print its own man page with <code>just --man</code>. Man pages are written in
<a href="https://en.wikipedia.org/wiki/Roff_%28software%29"><code>roff</code></a>, a venerable markup
language and one of the first practical applications of Unix. If you have
<a href="https://www.gnu.org/software/groff/"><code>groff</code></a> installed you can view the man
page with  <code>just --man | groff -mandoc -Tascii | less</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="grammar"><a class="header" href="#grammar">Grammar</a></h3>
<p>A non-normative grammar of <code>justfile</code>s can be found in
<a href="https://github.com/casey/just/blob/master/GRAMMAR.md">GRAMMAR.md</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="justsh"><a class="header" href="#justsh">just.sh</a></h3>
<p>Before <code>just</code> was a fancy Rust program it was a tiny shell script that called
<code>make</code>. You can find the old version in
<a href="https://github.com/casey/just/blob/master/contrib/just.sh">contrib/just.sh</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="global-and-user-justfiles"><a class="header" href="#global-and-user-justfiles">Global and User <code>justfile</code>s</a></h3>
<p>If you want some recipes to be available everywhere, you have a few options.</p>
<h4 id="global-justfile"><a class="header" href="#global-justfile">Global Justfile</a></h4>
<p><code>just --global-justfile</code>, or <code>just -g</code> for short, searches the following paths,
in-order, for a justfile:</p>
<ul>
<li><code>$XDG_CONFIG_HOME/just/justfile</code></li>
<li><code>$HOME/.config/just/justfile</code></li>
<li><code>$HOME/justfile</code></li>
<li><code>$HOME/.justfile</code></li>
</ul>
<p>You can put recipes that are used across many projects in a global justfile to
easily invoke them from any directory.</p>
<h4 id="user-justfile-tips"><a class="header" href="#user-justfile-tips">User justfile tips</a></h4>
<p>You can also adopt some of the following workflows. These tips assume you’ve
created a <code>justfile</code> at <code>~/.user.justfile</code>, but you can put this <code>justfile</code>
at any convenient path on your system.</p>
<h5 id="recipe-aliases"><a class="header" href="#recipe-aliases">Recipe Aliases</a></h5>
<p>If you want to call the recipes in <code>~/.user.justfile</code> by name, and don’t mind
creating an alias for every recipe, add the following to your shell’s
initialization script:</p>
<pre><code class="language-console">for recipe in `just --justfile ~/.user.justfile --summary`; do
  alias $recipe="just --justfile ~/.user.justfile --working-directory . $recipe"
done
</code></pre>
<p>Now, if you have a recipe called <code>foo</code> in <code>~/.user.justfile</code>, you can just type
<code>foo</code> at the command line to run it.</p>
<p>It took me way too long to realize that you could create recipe aliases like
this. Notwithstanding my tardiness, I am very pleased to bring you this major
advance in <code>justfile</code> technology.</p>
<h5 id="forwarding-alias"><a class="header" href="#forwarding-alias">Forwarding Alias</a></h5>
<p>If you’d rather not create aliases for every recipe, you can create a single alias:</p>
<pre><code class="language-console">alias .j='just --justfile ~/.user.justfile --working-directory .'
</code></pre>
<p>Now, if you have a recipe called <code>foo</code> in <code>~/.user.justfile</code>, you can just type
<code>.j foo</code> at the command line to run it.</p>
<p>I’m pretty sure that nobody actually uses this feature, but it’s there.</p>
<p>¯\_(ツ)_/¯</p>
<h5 id="customization"><a class="header" href="#customization">Customization</a></h5>
<p>You can customize the above aliases with additional options. For example, if
you’d prefer to have the recipes in your <code>justfile</code> run in your home directory,
instead of the current directory:</p>
<pre><code class="language-console">alias .j='just --justfile ~/.user.justfile --working-directory ~'
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="nodejs-packagejson-script-compatibility"><a class="header" href="#nodejs-packagejson-script-compatibility">Node.js <code>package.json</code> Script Compatibility</a></h3>
<p>The following export statement gives <code>just</code> recipes access to local Node module
binaries, and makes <code>just</code> recipe commands behave more like <code>script</code> entries in
Node.js <code>package.json</code> files:</p>
<pre><code class="language-just">export PATH := "./node_modules/.bin:" + env_var('PATH')
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="paths-on-windows"><a class="header" href="#paths-on-windows">Paths on Windows</a></h3>
<p>On Windows, all functions that return paths, except <code>invocation_directory()</code>
will return <code>\</code>-separated paths. When not using PowerShell or <code>cmd.exe</code> these
paths should be quoted to prevent the <code>\</code>s from being interpreted as character
escapes:</p>
<pre><code class="language-just">ls:
    echo '{{absolute_path(".")}}'
</code></pre>
<p><code>cygpath.exe</code> is an executable included in some distributions of Unix userlands
for Windows, including <a href="https://www.cygwin.com/">Cygwin</a> and
<a href="https://git-scm.com/downloads">Git</a> for Windows.</p>
<p><code>just</code> uses <code>cygpath.exe</code> in two places:</p>
<p>For backwards compatibility, <code>invocation_directory()</code>, uses <code>cygpath.exe</code> to
convert the invocation directory into a unix-style <code>/</code>-separated path. Use
<code>invocation_directory_native()</code> to get the native, Windows-style path. On unix,
<code>invocation_directory()</code> and <code>invocation_directory_native()</code> both return the
same unix-style path.</p>
<p><code>cygpath.exe</code> is used also used to convert Unix-style shebang lines into
Windows paths. As an alternative, the <code>[script]</code> attribute, currently unstable,
can be used, which does not depend on <code>cygpath.exe</code>.</p>
<p>If <code>cygpath.exe</code> is available, you can use it to convert between path styles:</p>
<pre><code class="language-just">foo_unix := '/hello/world'
foo_windows := shell('cygpath --windows $1', foo_unix)

bar_windows := 'C:\hello\world'
bar_unix := shell('cygpath --unix $1', bar_windows)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="remote-justfiles"><a class="header" href="#remote-justfiles">Remote Justfiles</a></h3>
<p>If you wish to include a <code>mod</code> or <code>import</code> source file in many <code>justfiles</code>
without needing to duplicate it, you can use an optional <code>mod</code> or <code>import</code>,
along with a recipe to fetch the module source:</p>
<pre><code class="language-just">import? 'foo.just'

fetch:
  curl https://raw.githubusercontent.com/casey/just/master/justfile &gt; foo.just
</code></pre>
<p>Given the above <code>justfile</code>, after running <code>just fetch</code>, the recipes in
<code>foo.just</code> will be available.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="printing-complex-strings"><a class="header" href="#printing-complex-strings">Printing Complex Strings</a></h3>
<p><code>echo</code> can be used to print strings, but because it processes escape sequences,
like <code>\n</code>, and different implementations of <code>echo</code> recognize different escape
sequences, using <code>printf</code> is often a better choice.</p>
<p><code>printf</code> takes a C-style format string and any number of arguments, which are
interpolated into the format string.</p>
<p>This can be combined with indented, triple quoted strings to emulate shell
heredocs.</p>
<p>Substitution complex strings into recipe bodies with <code>{…}</code> can also lead to
trouble as it may be split by the shell into multiple arguments depending on
the presence of whitespace and quotes. Exporting complex strings as environment
variables and referring to them with <code>"$NAME"</code>, note the double quotes, can
also help.</p>
<p>Putting all this together, to print a string verbatim to standard output, with
all its various escape sequences and quotes undisturbed:</p>
<pre><code class="language-just">export FOO := '''
  a complicated string with
  some dis\tur\bi\ng escape sequences
  and "quotes" of 'different' kinds
'''

bar:
  printf %s "$FOO"
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="alternatives-and-prior-art"><a class="header" href="#alternatives-and-prior-art">Alternatives and Prior Art</a></h3>
<p>There is no shortage of command runners! Some more or less similar alternatives
to <code>just</code> include:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Make_(software)">make</a>: The Unix build tool
that inspired <code>just</code>. There are a few different modern day descendents of the
original <code>make</code>, including
<a href="https://www.freebsd.org/cgi/man.cgi?make(1)">FreeBSD Make</a> and
<a href="https://www.gnu.org/software/make/">GNU Make</a>.</li>
<li><a href="https://github.com/go-task/task">task</a>: A YAML-based command runner written
in Go.</li>
<li><a href="https://github.com/egoist/maid">maid</a>: A Markdown-based command runner
written in JavaScript.</li>
<li><a href="https://github.com/microsoft/just">microsoft/just</a>: A JavaScript-based
command runner written in JavaScript.</li>
<li><a href="https://github.com/sagiegurari/cargo-make">cargo-make</a>: A command runner for
Rust projects.</li>
<li><a href="https://github.com/tj/mmake">mmake</a>: A wrapper around <code>make</code> with a number
of improvements, including remote includes.</li>
<li><a href="https://github.com/tj/robo">robo</a>: A YAML-based command runner written in
Go.</li>
<li><a href="https://github.com/jakedeichert/mask">mask</a>: A Markdown-based command runner
written in Rust.</li>
<li><a href="https://github.com/xonixx/makesure">makesure</a>: A simple and portable command
runner written in AWK and shell.</li>
<li><a href="https://github.com/VladimirMarkelov/haku">haku</a>: A make-like command runner
written in Rust.</li>
<li><a href="https://mise.jdx.dev/">mise</a>: A development environment tool manager written
in Rust supporing tasks in TOML files and standalone scripts.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p><code>just</code> welcomes your contributions! <code>just</code> is released under the maximally
permissive
<a href="https://creativecommons.org/publicdomain/zero/1.0/legalcode.txt">CC0</a> public
domain dedication and fallback license, so your changes must also be released
under this license.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h3>
<p><code>just</code> is written in Rust. Use
<a href="https://www.rust-lang.org/tools/install">rustup</a> to install a Rust toolchain.</p>
<p><code>just</code> is extensively tested. All new features must be covered by unit or
integration tests. Unit tests are under
<a href="https://github.com/casey/just/blob/master/src">src</a>, live alongside the code
being tested, and test code in isolation. Integration tests are in the <a href="https://github.com/casey/just/blob/master/tests">tests
directory</a> and test the <code>just</code>
binary from the outside by invoking <code>just</code> on a given <code>justfile</code> and set of
command-line arguments, and checking the output.</p>
<p>You should write whichever type of tests are easiest to write for your feature
while still providing good test coverage.</p>
<p>Unit tests are useful for testing new Rust functions that are used internally
and as an aid for development. A good example are the unit tests which cover
the
<a href="https://github.com/casey/just/blob/master/src/unindent.rs"><code>unindent()</code> function</a>,
used to unindent triple-quoted strings and backticks. <code>unindent()</code> has a bunch
of tricky edge cases which are easy to exercise with unit tests that call
<code>unindent()</code> directly.</p>
<p>Integration tests are useful for making sure that the final behavior of the
<code>just</code> binary is correct. <code>unindent()</code> is also covered by integration tests
which make sure that evaluating a triple-quoted string produces the correct
unindented value. However, there are not integration tests for all possible
cases. These are covered by faster, more concise unit tests that call
<code>unindent()</code> directly.</p>
<p>Integration tests use the <code>Test</code> struct, a builder which allows for easily
invoking <code>just</code> with a given <code>justfile</code>, arguments, and environment variables,
and checking the program’s stdout, stderr, and exit code .</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="contribution-workflow"><a class="header" href="#contribution-workflow">Contribution Workflow</a></h3>
<ol>
<li>
<p>Make sure the feature is wanted. There should be an open issue about the
feature with a comment from <a href="https://github.com/casey">@casey</a> saying that
it’s a good idea or seems reasonable. If there isn’t, open a new issue and
ask for feedback.</p>
<p>There are lots of good features which can’t be merged, either because they
aren’t backwards compatible, have an implementation which would
overcomplicate the codebase, or go against <code>just</code>’s design philosophy.</p>
</li>
<li>
<p>Settle on the design of the feature. If the feature has multiple possible
implementations or syntaxes, make sure to nail down the details in the
issue.</p>
</li>
<li>
<p>Clone <code>just</code> and start hacking. The best workflow is to have the code you’re
working on in an editor alongside a job that re-runs tests whenever a file
changes. You can run such a job by installing
<a href="https://github.com/watchexec/cargo-watch">cargo-watch</a> with <code>cargo install cargo-watch</code> and running <code>just watch test</code>.</p>
</li>
<li>
<p>Add a failing test for your feature. Most of the time this will be an
integration test which exercises the feature end-to-end. Look for an
appropriate file to put the test in in
<a href="https://github.com/casey/just/blob/master/tests">tests</a>, or add a new file
in <a href="https://github.com/casey/just/blob/master/tests">tests</a> and add a <code>mod</code>
statement importing that file in
<a href="https://github.com/casey/just/blob/master/tests/lib.rs">tests/lib.rs</a>.</p>
</li>
<li>
<p>Implement the feature.</p>
</li>
<li>
<p>Run <code>just ci</code> to make sure that all tests, lints, and checks pass. Requires
<a href="https://github.com/rust-lang/mdBook">mdBook</a> and
<a href="https://github.com/Michael-F-Bryan/mdbook-linkcheck">mdbook-linkcheck</a>.</p>
</li>
<li>
<p>Open a PR with the new code that is editable by maintainers. PRs often
require rebasing and minor tweaks. If the PR is not editable by maintainers,
each rebase and tweak will require a round trip of code review. Your PR may
be summarily closed if it is not editable by maintainers.</p>
</li>
<li>
<p>Incorporate feedback.</p>
</li>
<li>
<p>Enjoy the sweet feeling of your PR getting merged!</p>
</li>
</ol>
<p>Feel free to open a draft PR at any time for discussion and feedback.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="hints"><a class="header" href="#hints">Hints</a></h3>
<p>Here are some hints to get you started with specific kinds of new features,
which you can use in addition to the contribution workflow above.</p>
<h4 id="adding-a-new-attribute"><a class="header" href="#adding-a-new-attribute">Adding a New Attribute</a></h4>
<ol>
<li>
<p>Write a new integration test in
<a href="https://github.com/casey/just/blob/master/tests/attributes.rs">tests/attributes.rs</a>.</p>
</li>
<li>
<p>Add a new variant to the
<a href="https://github.com/casey/just/blob/master/src/attribute.rs"><code>Attribute</code></a>
enum.</p>
</li>
<li>
<p>Implement the functionality of the new attribute.</p>
</li>
<li>
<p>Run <code>just ci</code> to make sure that all tests pass.</p>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h3 id="janus"><a class="header" href="#janus">Janus</a></h3>
<p><a href="https://github.com/casey/janus">Janus</a> is a tool for checking whether a change
to <code>just</code> breaks or changes the interpretation of existing <code>justfile</code>s. It
collects and analyzes public <code>justfile</code>s on GitHub.</p>
<p>Before merging a particularly large or gruesome change, Janus should be run to
make sure that nothing breaks. Don’t worry about running Janus yourself, Casey
will happily run it for you on changes that need it.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="minimum-supported-rust-version"><a class="header" href="#minimum-supported-rust-version">Minimum Supported Rust Version</a></h3>
<p>The minimum supported Rust version, or MSRV, is current stable Rust. It may
build on older versions of Rust, but this is not guaranteed.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="new-releases"><a class="header" href="#new-releases">New Releases</a></h3>
<p>New releases of <code>just</code> are made frequently so that users quickly get access to
new features.</p>
<p>Release commit messages use the following template:</p>
<pre><code>Release x.y.z

- Bump version: x.y.z → x.y.z
- Update changelog
- Update changelog contributor credits
- Update dependencies
- Update version references in readme
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h3 id="what-are-the-idiosyncrasies-of-make-that-just-avoids"><a class="header" href="#what-are-the-idiosyncrasies-of-make-that-just-avoids">What are the idiosyncrasies of Make that Just avoids?</a></h3>
<p><code>make</code> has some behaviors which are confusing, complicated, or make it
unsuitable for use as a general command runner.</p>
<p>One example is that under some circumstances, <code>make</code> won’t actually run the
commands in a recipe. For example, if you have a file called <code>test</code> and the
following makefile:</p>
<pre><code class="language-just">test:
  ./test
</code></pre>
<p><code>make</code> will refuse to run your tests:</p>
<pre><code class="language-console">$ make test
make: `test' is up to date.
</code></pre>
<p><code>make</code> assumes that the <code>test</code> recipe produces a file called <code>test</code>. Since this
file exists and the recipe has no other dependencies, <code>make</code> thinks that it
doesn’t have anything to do and exits.</p>
<p>To be fair, this behavior is desirable when using <code>make</code> as a build system, but
not when using it as a command runner. You can disable this behavior for
specific targets using <code>make</code>’s built-in
<a href="https://www.gnu.org/software/make/manual/html_node/Phony-Targets.html"><code>.PHONY</code> target name</a>,
but the syntax is verbose and can be hard to remember. The explicit list of
phony targets, written separately from the recipe definitions, also introduces
the risk of accidentally defining a new non-phony target. In <code>just</code>, all
recipes are treated as if they were phony.</p>
<p>Other examples of <code>make</code>’s idiosyncrasies include the difference between <code>=</code>
and <code>:=</code> in assignments, the confusing error messages that are produced if you
mess up your makefile, needing <code>$$</code> to use environment variables in recipes,
and incompatibilities between different flavors of <code>make</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h3 id="whats-the-relationship-between-just-and-cargo-build-scripts"><a class="header" href="#whats-the-relationship-between-just-and-cargo-build-scripts">What’s the relationship between Just and Cargo build scripts?</a></h3>
<p><a href="http://doc.crates.io/build-script.html"><code>cargo</code> build scripts</a> have a pretty
specific use, which is to control how <code>cargo</code> builds your Rust project. This
might include adding flags to <code>rustc</code> invocations, building an external
dependency, or running some kind of codegen step.</p>
<p><code>just</code>, on the other hand, is for all the other miscellaneous commands you
might run as part of development. Things like running tests in different
configurations, linting your code, pushing build artifacts to a server,
removing temporary files, and the like.</p>
<p>Also, although <code>just</code> is written in Rust, it can be used regardless of the
language or build system your project uses.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="further-ramblings"><a class="header" href="#further-ramblings">Further Ramblings</a></h2>
<p>I personally find it very useful to write a <code>justfile</code> for almost every
project, big or small.</p>
<p>On a big project with multiple contributors, it’s very useful to have a file
with all the commands needed to work on the project close at hand.</p>
<p>There are probably different commands to test, build, lint, deploy, and the
like, and having them all in one place is useful and cuts down on the time you
have to spend telling people which commands to run and how to type them.</p>
<p>And, with an easy place to put commands, it’s likely that you’ll come up with
other useful things which are part of the project’s collective wisdom, but
which aren’t written down anywhere, like the arcane commands needed for some
part of your revision control workflow, to install all your project’s
dependencies, or all the random flags you might need to pass to the build
system.</p>
<p>Some ideas for recipes:</p>
<ul>
<li>
<p>Deploying/publishing the project</p>
</li>
<li>
<p>Building in release mode vs debug mode</p>
</li>
<li>
<p>Running in debug mode or with logging enabled</p>
</li>
<li>
<p>Complex git workflows</p>
</li>
<li>
<p>Updating dependencies</p>
</li>
<li>
<p>Running different sets of tests, for example fast tests vs slow tests, or
running them with verbose output</p>
</li>
<li>
<p>Any complex set of commands that you really should write down somewhere, if
only to be able to remember them</p>
</li>
</ul>
<p>Even for small, personal projects it’s nice to be able to remember commands by
name instead of ^Reverse searching your shell history, and it’s a huge boon to
be able to go into an old project written in a random language with a
mysterious build system and know that all the commands you need to do whatever
you need to do are in the <code>justfile</code>, and that if you type <code>just</code> something
useful (or at least interesting!) will probably happen.</p>
<p>For ideas for recipes, check out
<a href="https://github.com/casey/just/blob/master/justfile">this project’s <code>justfile</code></a>,
or some of the
<code>justfile</code>s
<a href="https://github.com/search?q=path%3A**%2Fjustfile&amp;type=code">out in the wild</a>.</p>
<p>Anyways, I think that’s about it for this incredibly long-winded README.</p>
<p>I hope you enjoy using <code>just</code> and find great success and satisfaction in all
your computational endeavors!</p>
<p>😸</p>
<p><a href="further-ramblings.html#just">🔼 Back to the top!</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
